<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Process PVZ data | OII Gaming Study</title>
  <meta name="description" content="2 Process PVZ data | OII Gaming Study" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Process PVZ data | OII Gaming Study" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Process PVZ data | OII Gaming Study" />
  
  
  

<meta name="author" content="Niklas Johannes, Matti Vuorre, Andrew Przybylski" />


<<<<<<< HEAD
<meta name="date" content="2020-12-16" />
=======
<meta name="date" content="2020-11-15" />
>>>>>>> f449c935d496bcb159c5533847257a56a9918a85

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="process-acnh-data.html"/>
<<<<<<< HEAD
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
=======
>>>>>>> f449c935d496bcb159c5533847257a56a9918a85
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<<<<<<< HEAD
=======
<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>
>>>>>>> f449c935d496bcb159c5533847257a56a9918a85


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span. { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">OII Gaming Study</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preface</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#raw-data"><i class="fa fa-check"></i><b>1.1</b> Raw data</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#analyses-and-reproducibility"><i class="fa fa-check"></i><b>1.2</b> Analyses and reproducibility</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="process-pvz-data.html"><a href="process-pvz-data.html"><i class="fa fa-check"></i><b>2</b> Process PVZ data</a><ul>
<li class="chapter" data-level="2.1" data-path="index.html"><a href="index.html#raw-data"><i class="fa fa-check"></i><b>2.1</b> Raw data</a></li>
<li class="chapter" data-level="2.2" data-path="process-pvz-data.html"><a href="process-pvz-data.html#process-raw-files"><i class="fa fa-check"></i><b>2.2</b> Process raw files</a><ul>
<li class="chapter" data-level="2.2.1" data-path="process-pvz-data.html"><a href="process-pvz-data.html#survey"><i class="fa fa-check"></i><b>2.2.1</b> Survey</a></li>
<li class="chapter" data-level="2.2.2" data-path="process-pvz-data.html"><a href="process-pvz-data.html#game-time"><i class="fa fa-check"></i><b>2.2.2</b> Game time</a></li>
<li class="chapter" data-level="2.2.3" data-path="process-pvz-data.html"><a href="process-pvz-data.html#authentications"><i class="fa fa-check"></i><b>2.2.3</b> Authentications</a></li>
<li class="chapter" data-level="2.2.4" data-path="process-pvz-data.html"><a href="process-pvz-data.html#characters"><i class="fa fa-check"></i><b>2.2.4</b> Characters</a></li>
<li class="chapter" data-level="2.2.5" data-path="process-pvz-data.html"><a href="process-pvz-data.html#friends"><i class="fa fa-check"></i><b>2.2.5</b> Friends</a></li>
<li class="chapter" data-level="2.2.6" data-path="process-pvz-data.html"><a href="process-pvz-data.html#gestures"><i class="fa fa-check"></i><b>2.2.6</b> Gestures</a></li>
<li class="chapter" data-level="2.2.7" data-path="process-pvz-data.html"><a href="process-pvz-data.html#leveling"><i class="fa fa-check"></i><b>2.2.7</b> Leveling</a></li>
<li class="chapter" data-level="2.2.8" data-path="process-pvz-data.html"><a href="process-pvz-data.html#prestige"><i class="fa fa-check"></i><b>2.2.8</b> Prestige</a></li>
<li class="chapter" data-level="2.2.9" data-path="process-pvz-data.html"><a href="process-pvz-data.html#registrations"><i class="fa fa-check"></i><b>2.2.9</b> Registrations</a></li>
<li class="chapter" data-level="2.2.10" data-path="process-pvz-data.html"><a href="process-pvz-data.html#experience-points"><i class="fa fa-check"></i><b>2.2.10</b> Experience Points</a></li>
<li class="chapter" data-level="2.2.11" data-path="process-pvz-data.html"><a href="process-pvz-data.html#process-game-time"><i class="fa fa-check"></i><b>2.2.11</b> Process game time</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="process-pvz-data.html"><a href="process-pvz-data.html#merge-survey-and-telemetry"><i class="fa fa-check"></i><b>2.3</b> Merge survey and telemetry</a></li>
<li class="chapter" data-level="2.4" data-path="process-pvz-data.html"><a href="process-pvz-data.html#exclusions"><i class="fa fa-check"></i><b>2.4</b> Exclusions</a><ul>
<li class="chapter" data-level="2.4.1" data-path="process-pvz-data.html"><a href="process-pvz-data.html#straightliners"><i class="fa fa-check"></i><b>2.4.1</b> Straightliners</a></li>
<li class="chapter" data-level="2.4.2" data-path="process-pvz-data.html"><a href="process-pvz-data.html#outliers"><i class="fa fa-check"></i><b>2.4.2</b> Outliers</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="process-pvz-data.html"><a href="process-pvz-data.html#save-files"><i class="fa fa-check"></i><b>2.5</b> Save files</a></li>
<li class="chapter" data-level="2.6" data-path="process-pvz-data.html"><a href="process-pvz-data.html#session-info"><i class="fa fa-check"></i><b>2.6</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="process-acnh-data.html"><a href="process-acnh-data.html"><i class="fa fa-check"></i><b>3</b> Process AC:NH data</a><ul>
<li class="chapter" data-level="3.1" data-path="index.html"><a href="index.html#raw-data"><i class="fa fa-check"></i><b>3.1</b> Raw data</a></li>
<li class="chapter" data-level="3.2" data-path="process-pvz-data.html"><a href="process-pvz-data.html#process-raw-files"><i class="fa fa-check"></i><b>3.2</b> Process raw files</a><ul>
<li class="chapter" data-level="3.2.1" data-path="process-acnh-data.html"><a href="process-acnh-data.html#clean-survey-data"><i class="fa fa-check"></i><b>3.2.1</b> Clean survey data</a></li>
<li class="chapter" data-level="3.2.2" data-path="process-acnh-data.html"><a href="process-acnh-data.html#checking"><i class="fa fa-check"></i><b>3.2.2</b> Checking</a></li>
<li class="chapter" data-level="3.2.3" data-path="process-acnh-data.html"><a href="process-acnh-data.html#telemetry"><i class="fa fa-check"></i><b>3.2.3</b> Telemetry</a></li>
<li class="chapter" data-level="3.2.4" data-path="process-acnh-data.html"><a href="process-acnh-data.html#clean"><i class="fa fa-check"></i><b>3.2.4</b> Clean</a></li>
<li class="chapter" data-level="3.2.5" data-path="process-acnh-data.html"><a href="process-acnh-data.html#join-survey-and-telemetry"><i class="fa fa-check"></i><b>3.2.5</b> Join survey and telemetry</a></li>
<li class="chapter" data-level="3.2.6" data-path="process-acnh-data.html"><a href="process-acnh-data.html#checking-1"><i class="fa fa-check"></i><b>3.2.6</b> Checking</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="process-pvz-data.html"><a href="process-pvz-data.html#exclusions"><i class="fa fa-check"></i><b>3.3</b> Exclusions</a><ul>
<li class="chapter" data-level="3.3.1" data-path="process-pvz-data.html"><a href="process-pvz-data.html#straightliners"><i class="fa fa-check"></i><b>3.3.1</b> Straightliners</a></li>
<li class="chapter" data-level="3.3.2" data-path="process-pvz-data.html"><a href="process-pvz-data.html#outliers"><i class="fa fa-check"></i><b>3.3.2</b> Outliers</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="process-pvz-data.html"><a href="process-pvz-data.html#save-files"><i class="fa fa-check"></i><b>3.4</b> Save files</a></li>
<li class="chapter" data-level="3.5" data-path="process-pvz-data.html"><a href="process-pvz-data.html#session-info"><i class="fa fa-check"></i><b>3.5</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="describe-explore.html"><a href="describe-explore.html"><i class="fa fa-check"></i><b>4</b> Describe &amp; explore</a><ul>
<li class="chapter" data-level="4.1" data-path="describe-explore.html"><a href="describe-explore.html#demographics"><i class="fa fa-check"></i><b>4.1</b> Demographics</a></li>
<li class="chapter" data-level="4.2" data-path="describe-explore.html"><a href="describe-explore.html#survey-dates"><i class="fa fa-check"></i><b>4.2</b> Survey dates</a></li>
<li class="chapter" data-level="4.3" data-path="describe-explore.html"><a href="describe-explore.html#response-rates"><i class="fa fa-check"></i><b>4.3</b> Response rates</a></li>
<li class="chapter" data-level="4.4" data-path="describe-explore.html"><a href="describe-explore.html#missingness"><i class="fa fa-check"></i><b>4.4</b> Missingness</a></li>
<li class="chapter" data-level="4.5" data-path="describe-explore.html"><a href="describe-explore.html#univariate-figures"><i class="fa fa-check"></i><b>4.5</b> Univariate figures</a></li>
<li class="chapter" data-level="4.6" data-path="describe-explore.html"><a href="describe-explore.html#correlation-matrices"><i class="fa fa-check"></i><b>4.6</b> Correlation matrices</a><ul>
<li class="chapter" data-level="4.6.1" data-path="describe-explore.html"><a href="describe-explore.html#well-being-motivations-correlations"><i class="fa fa-check"></i><b>4.6.1</b> Well-being &amp; motivations correlations</a></li>
<li class="chapter" data-level="4.6.2" data-path="describe-explore.html"><a href="describe-explore.html#more-well-being-correlations"><i class="fa fa-check"></i><b>4.6.2</b> More well-being correlations</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="describe-explore.html"><a href="describe-explore.html#plot-studies-combined"><i class="fa fa-check"></i><b>4.7</b> Plot studies combined</a></li>
<li class="chapter" data-level="4.8" data-path="describe-explore.html"><a href="describe-explore.html#create-summary-figure"><i class="fa fa-check"></i><b>4.8</b> Create summary figure</a></li>
<li class="chapter" data-level="4.9" data-path="process-pvz-data.html"><a href="process-pvz-data.html#session-info"><i class="fa fa-check"></i><b>4.9</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="analyses.html"><a href="analyses.html"><i class="fa fa-check"></i><b>5</b> Analyses</a><ul>
<li class="chapter" data-level="5.1" data-path="analyses.html"><a href="analyses.html#create-joint-dataset"><i class="fa fa-check"></i><b>5.1</b> Create joint dataset</a></li>
<li class="chapter" data-level="5.2" data-path="analyses.html"><a href="analyses.html#rq1-time-and-well-being"><i class="fa fa-check"></i><b>5.2</b> RQ1: Time and well-being</a><ul>
<li class="chapter" data-level="5.2.1" data-path="analyses.html"><a href="analyses.html#objective-vs-subjective-game-time"><i class="fa fa-check"></i><b>5.2.1</b> Objective vs subjective game time</a></li>
<li class="chapter" data-level="5.2.2" data-path="analyses.html"><a href="analyses.html#objective-time-and-swb"><i class="fa fa-check"></i><b>5.2.2</b> Objective time and SWB</a></li>
<li class="chapter" data-level="5.2.3" data-path="analyses.html"><a href="analyses.html#subjective-time-and-swb"><i class="fa fa-check"></i><b>5.2.3</b> Subjective time and SWB</a></li>
<li class="chapter" data-level="5.2.4" data-path="analyses.html"><a href="analyses.html#figure"><i class="fa fa-check"></i><b>5.2.4</b> Figure</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="analyses.html"><a href="analyses.html#rq2-well-being-and-motivation"><i class="fa fa-check"></i><b>5.3</b> RQ2: Well-being and motivation</a></li>
<li class="chapter" data-level="5.4" data-path="analyses.html"><a href="analyses.html#nonlinear-models"><i class="fa fa-check"></i><b>5.4</b> Nonlinear models</a></li>
<li class="chapter" data-level="5.5" data-path="analyses.html"><a href="analyses.html#system-information"><i class="fa fa-check"></i><b>5.5</b> System information</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">OII Gaming Study</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="process-pvz-data" class="section level1">
<h1><span class="header-section-number">2</span> Process PVZ data</h1>
<p>Here, we process the Plants vs. Zombies: Battle for Neighborville (PVZ) survey and telemetry data files (i.e., gaming data that was captured by EA’s servers).</p>
<p>We used the following R packages. Pacman is a package manager that install packages if you don’t have them installed. We always show the package versions at the bottom of each section.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="process-pvz-data.html#cb1-1"></a><span class="kw">library</span>(pacman)</span>
<span id="cb1-2"><a href="process-pvz-data.html#cb1-2"></a><span class="kw">p_load</span>(</span>
<span id="cb1-3"><a href="process-pvz-data.html#cb1-3"></a>  readxl,</span>
<span id="cb1-4"><a href="process-pvz-data.html#cb1-4"></a>  knitr,</span>
<span id="cb1-5"><a href="process-pvz-data.html#cb1-5"></a>  here,</span>
<span id="cb1-6"><a href="process-pvz-data.html#cb1-6"></a>  lubridate,</span>
<span id="cb1-7"><a href="process-pvz-data.html#cb1-7"></a>  scales,</span>
<span id="cb1-8"><a href="process-pvz-data.html#cb1-8"></a>  janitor,</span>
<span id="cb1-9"><a href="process-pvz-data.html#cb1-9"></a>  anytime,</span>
<span id="cb1-10"><a href="process-pvz-data.html#cb1-10"></a>  tidyverse</span>
<span id="cb1-11"><a href="process-pvz-data.html#cb1-11"></a>)</span></code></pre></div>
<div id="raw-data" class="section level2">
<h2><span class="header-section-number">2.1</span> Raw data</h2>
<p>The raw data files, including the raw survey data, are in a zip compressed file on OSF: <a href="https://osf.io/cjd6z/" class="uri">https://osf.io/cjd6z/</a>. (A user ID column was manually removed from the survey data before uploading.) Start by downloading that file and unpacking it to the target directory:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="process-pvz-data.html#cb2-1"></a>file_dest &lt;-<span class="st"> </span><span class="kw">here</span>(<span class="st">&quot;data-raw/ea/ea.zip&quot;</span>)</span>
<span id="cb2-2"><a href="process-pvz-data.html#cb2-2"></a><span class="co"># Download &amp; extract file only if you haven&#39;t yet</span></span>
<span id="cb2-3"><a href="process-pvz-data.html#cb2-3"></a><span class="cf">if</span> (<span class="op">!</span><span class="kw">file.exists</span>(file_dest)) {</span>
<span id="cb2-4"><a href="process-pvz-data.html#cb2-4"></a>  <span class="kw">download.file</span>(<span class="st">&quot;https://osf.io/4gp3r/download&quot;</span>, file_dest)</span>
<span id="cb2-5"><a href="process-pvz-data.html#cb2-5"></a>}</span>
<span id="cb2-6"><a href="process-pvz-data.html#cb2-6"></a><span class="cf">if</span> (<span class="op">!</span><span class="kw">file.exists</span>(<span class="kw">here</span>(<span class="st">&quot;data-raw/ea/Oxford PvZ - Pilot Wave + Wave 1 Download.xlsx&quot;</span>))) {</span>
<span id="cb2-7"><a href="process-pvz-data.html#cb2-7"></a>  <span class="kw">unzip</span>(file_dest, <span class="dt">exdir =</span> <span class="kw">here</span>(<span class="st">&quot;data-raw/ea/&quot;</span>))</span>
<span id="cb2-8"><a href="process-pvz-data.html#cb2-8"></a>}</span></code></pre></div>
<p>EA sent out the survey in two waves: one in August of 2020, the second in September 2020. For each wave, there are 9 telemetry files, each one recording a different aspect of play events in Plants vs. Zombies: Battle for Neighborville and one file for the survey results.</p>
<p>These telemetry files contain info on PVZ play events from a long period of time, including for players who did not participate in the survey. We limit our analyses to the individuals who participated in the survey, and to the 2 weeks preceding the survey. However, the raw data files might be of interest for additional analyses.</p>
</div>
<div id="process-raw-files" class="section level2">
<h2><span class="header-section-number">2.2</span> Process raw files</h2>
<p>Because there were two of each telemetry file (waves), we create a function to read both waves’ data into a single table:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="process-pvz-data.html#cb3-1"></a>read_both_waves &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">stub =</span> <span class="st">&quot;OII_PVZ_Authentications&quot;</span>, ...) {</span>
<span id="cb3-2"><a href="process-pvz-data.html#cb3-2"></a>  <span class="co"># Filenames of wave 1 and 2 authentications files</span></span>
<span id="cb3-3"><a href="process-pvz-data.html#cb3-3"></a>  <span class="kw">list.files</span>(</span>
<span id="cb3-4"><a href="process-pvz-data.html#cb3-4"></a>    <span class="kw">here</span>(<span class="st">&quot;data-raw/ea&quot;</span>), <span class="dt">pattern =</span> stub, <span class="dt">full.names =</span> <span class="ot">TRUE</span></span>
<span id="cb3-5"><a href="process-pvz-data.html#cb3-5"></a>  ) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-6"><a href="process-pvz-data.html#cb3-6"></a><span class="st">    </span><span class="co"># Put wave 1 first</span></span>
<span id="cb3-7"><a href="process-pvz-data.html#cb3-7"></a><span class="st">    </span><span class="kw">rev</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-8"><a href="process-pvz-data.html#cb3-8"></a><span class="st">    </span><span class="co"># Read into a list of data frames</span></span>
<span id="cb3-9"><a href="process-pvz-data.html#cb3-9"></a><span class="st">    </span><span class="kw">map</span>(read_csv, ...) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-10"><a href="process-pvz-data.html#cb3-10"></a><span class="st">    </span><span class="co"># Bind into one data frame with wave ID</span></span>
<span id="cb3-11"><a href="process-pvz-data.html#cb3-11"></a><span class="st">    </span><span class="kw">bind_rows</span>(<span class="dt">.id =</span> <span class="st">&quot;wave&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb3-12"><a href="process-pvz-data.html#cb3-12"></a><span class="st">    </span><span class="co"># Take only participants who filled out survey</span></span>
<span id="cb3-13"><a href="process-pvz-data.html#cb3-13"></a><span class="st">    </span><span class="kw">filter</span>(player_id <span class="op">%in%</span><span class="st"> </span>survey<span class="op">$</span>player_id)</span>
<span id="cb3-14"><a href="process-pvz-data.html#cb3-14"></a>}</span></code></pre></div>
<div id="survey" class="section level3">
<h3><span class="header-section-number">2.2.1</span> Survey</h3>
<p>Because we only keep telemetry data of players who answered the survey, we’ll load the survey first.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="process-pvz-data.html#cb4-1"></a>survey &lt;-<span class="st"> </span><span class="kw">read_excel</span>(</span>
<span id="cb4-2"><a href="process-pvz-data.html#cb4-2"></a>  <span class="kw">here</span>(<span class="st">&quot;data-raw/ea/Oxford PvZ - Pilot Wave + Wave 1 Download.xlsx&quot;</span>)</span>
<span id="cb4-3"><a href="process-pvz-data.html#cb4-3"></a>)</span>
<span id="cb4-4"><a href="process-pvz-data.html#cb4-4"></a></span>
<span id="cb4-5"><a href="process-pvz-data.html#cb4-5"></a>survey &lt;-<span class="st"> </span>survey <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb4-6"><a href="process-pvz-data.html#cb4-6"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb4-7"><a href="process-pvz-data.html#cb4-7"></a>    <span class="co"># Ensure date data type</span></span>
<span id="cb4-8"><a href="process-pvz-data.html#cb4-8"></a>    <span class="dt">date =</span> <span class="kw">mdy_hm</span>(date),</span>
<span id="cb4-9"><a href="process-pvz-data.html#cb4-9"></a>    <span class="co"># Need another name to use in filtering telemetry</span></span>
<span id="cb4-10"><a href="process-pvz-data.html#cb4-10"></a>    <span class="dt">start_date =</span> date</span>
<span id="cb4-11"><a href="process-pvz-data.html#cb4-11"></a>  ) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb4-12"><a href="process-pvz-data.html#cb4-12"></a><span class="st">  </span><span class="co"># Other files use player_id</span></span>
<span id="cb4-13"><a href="process-pvz-data.html#cb4-13"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">player_id =</span> UID)</span></code></pre></div>
<div id="clean-and-transform" class="section level4">
<h4><span class="header-section-number">2.2.1.1</span> Clean and transform</h4>
<p>Next, we give some sensible variable names and assign proper variable types for the survey.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="process-pvz-data.html#cb5-1"></a><span class="co"># Rename variables</span></span>
<span id="cb5-2"><a href="process-pvz-data.html#cb5-2"></a>survey &lt;-<span class="st"> </span></span>
<span id="cb5-3"><a href="process-pvz-data.html#cb5-3"></a><span class="st">  </span>survey <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-4"><a href="process-pvz-data.html#cb5-4"></a><span class="st">  </span><span class="kw">select</span>(</span>
<span id="cb5-5"><a href="process-pvz-data.html#cb5-5"></a>    </span>
<span id="cb5-6"><a href="process-pvz-data.html#cb5-6"></a>    <span class="co"># meta-info</span></span>
<span id="cb5-7"><a href="process-pvz-data.html#cb5-7"></a>    player_id,</span>
<span id="cb5-8"><a href="process-pvz-data.html#cb5-8"></a>    start_date, date,</span>
<span id="cb5-9"><a href="process-pvz-data.html#cb5-9"></a>    <span class="dt">survey_duration =</span> qtime,</span>
<span id="cb5-10"><a href="process-pvz-data.html#cb5-10"></a>    <span class="dt">of_age =</span> Q2,</span>
<span id="cb5-11"><a href="process-pvz-data.html#cb5-11"></a>    <span class="dt">consent =</span> Q3,</span>
<span id="cb5-12"><a href="process-pvz-data.html#cb5-12"></a>    </span>
<span id="cb5-13"><a href="process-pvz-data.html#cb5-13"></a>    <span class="co"># demographics</span></span>
<span id="cb5-14"><a href="process-pvz-data.html#cb5-14"></a>    <span class="dt">played =</span> Q1,</span>
<span id="cb5-15"><a href="process-pvz-data.html#cb5-15"></a>    <span class="dt">country =</span> hCountry,</span>
<span id="cb5-16"><a href="process-pvz-data.html#cb5-16"></a>    <span class="dt">survey_language =</span> PRELANG,</span>
<span id="cb5-17"><a href="process-pvz-data.html#cb5-17"></a>    <span class="dt">age =</span> D1,</span>
<span id="cb5-18"><a href="process-pvz-data.html#cb5-18"></a>    <span class="dt">gender =</span> D2,</span>
<span id="cb5-19"><a href="process-pvz-data.html#cb5-19"></a>    <span class="dt">gender_other =</span> D2r3oe,</span>
<span id="cb5-20"><a href="process-pvz-data.html#cb5-20"></a>    <span class="dt">experience =</span> D3,</span>
<span id="cb5-21"><a href="process-pvz-data.html#cb5-21"></a>    </span>
<span id="cb5-22"><a href="process-pvz-data.html#cb5-22"></a>    <span class="co"># well-being</span></span>
<span id="cb5-23"><a href="process-pvz-data.html#cb5-23"></a>    <span class="dt">spane_ =</span> <span class="kw">starts_with</span>(<span class="st">&quot;A1&quot;</span>), <span class="co"># general well-being in the two weeks</span></span>
<span id="cb5-24"><a href="process-pvz-data.html#cb5-24"></a>    <span class="dt">straightliner_spane =</span> hA1Straight,</span>
<span id="cb5-25"><a href="process-pvz-data.html#cb5-25"></a>    </span>
<span id="cb5-26"><a href="process-pvz-data.html#cb5-26"></a>    <span class="co"># motivations</span></span>
<span id="cb5-27"><a href="process-pvz-data.html#cb5-27"></a>    <span class="dt">played_with_others =</span> NSat1, <span class="co"># filter question that determines whether relatedness items were shown</span></span>
<span id="cb5-28"><a href="process-pvz-data.html#cb5-28"></a>    <span class="dt">autonomy_ =</span> NSat2r1<span class="op">:</span>NSat2r3,</span>
<span id="cb5-29"><a href="process-pvz-data.html#cb5-29"></a>    <span class="dt">competence_ =</span> NSat2r4<span class="op">:</span>NSat2r6,</span>
<span id="cb5-30"><a href="process-pvz-data.html#cb5-30"></a>    <span class="dt">relatedness_ =</span> NSat2r7<span class="op">:</span>NSat2r9,</span>
<span id="cb5-31"><a href="process-pvz-data.html#cb5-31"></a>    <span class="dt">enjoyment_ =</span> NSat2r10<span class="op">:</span>NSat2r13,</span>
<span id="cb5-32"><a href="process-pvz-data.html#cb5-32"></a>    <span class="dt">extrinsic_ =</span> NSat2r14<span class="op">:</span>NSat2r17,</span>
<span id="cb5-33"><a href="process-pvz-data.html#cb5-33"></a>    <span class="dt">straightliner_motivations =</span> hNSat2Straight,</span>
<span id="cb5-34"><a href="process-pvz-data.html#cb5-34"></a>    </span>
<span id="cb5-35"><a href="process-pvz-data.html#cb5-35"></a>    <span class="co"># self-reported play</span></span>
<span id="cb5-36"><a href="process-pvz-data.html#cb5-36"></a>    <span class="dt">active_play_hours =</span> GT1c1,</span>
<span id="cb5-37"><a href="process-pvz-data.html#cb5-37"></a>    <span class="dt">active_play_minutes =</span> GT1c2,</span>
<span id="cb5-38"><a href="process-pvz-data.html#cb5-38"></a>    <span class="dt">within_estimate =</span> GT2,</span>
<span id="cb5-39"><a href="process-pvz-data.html#cb5-39"></a>    <span class="dt">between_estimate =</span> GT3,</span>
<span id="cb5-40"><a href="process-pvz-data.html#cb5-40"></a>    <span class="dt">spane_game_ =</span> <span class="kw">starts_with</span>(<span class="st">&quot;GT4&quot;</span>)</span>
<span id="cb5-41"><a href="process-pvz-data.html#cb5-41"></a>  )</span>
<span id="cb5-42"><a href="process-pvz-data.html#cb5-42"></a></span>
<span id="cb5-43"><a href="process-pvz-data.html#cb5-43"></a><span class="co"># Assign proper variable types and factor levels</span></span>
<span id="cb5-44"><a href="process-pvz-data.html#cb5-44"></a>survey &lt;-<span class="st"> </span>survey <span class="op">%&gt;%</span><span class="st">   </span></span>
<span id="cb5-45"><a href="process-pvz-data.html#cb5-45"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb5-46"><a href="process-pvz-data.html#cb5-46"></a>    <span class="kw">across</span>(</span>
<span id="cb5-47"><a href="process-pvz-data.html#cb5-47"></a>      <span class="kw">c</span>(</span>
<span id="cb5-48"><a href="process-pvz-data.html#cb5-48"></a>        player_id,</span>
<span id="cb5-49"><a href="process-pvz-data.html#cb5-49"></a>        of_age<span class="op">:</span>survey_language,</span>
<span id="cb5-50"><a href="process-pvz-data.html#cb5-50"></a>        gender,</span>
<span id="cb5-51"><a href="process-pvz-data.html#cb5-51"></a>        played_with_others</span>
<span id="cb5-52"><a href="process-pvz-data.html#cb5-52"></a>      ),</span>
<span id="cb5-53"><a href="process-pvz-data.html#cb5-53"></a>      as.factor</span>
<span id="cb5-54"><a href="process-pvz-data.html#cb5-54"></a>    ),</span>
<span id="cb5-55"><a href="process-pvz-data.html#cb5-55"></a>    </span>
<span id="cb5-56"><a href="process-pvz-data.html#cb5-56"></a>    <span class="kw">across</span>(</span>
<span id="cb5-57"><a href="process-pvz-data.html#cb5-57"></a>      <span class="kw">c</span>(of_age<span class="op">:</span>played, played_with_others),</span>
<span id="cb5-58"><a href="process-pvz-data.html#cb5-58"></a>      <span class="op">~</span><span class="st"> </span><span class="kw">fct_recode</span>(</span>
<span id="cb5-59"><a href="process-pvz-data.html#cb5-59"></a>        .x,</span>
<span id="cb5-60"><a href="process-pvz-data.html#cb5-60"></a>        <span class="st">&quot;Yes&quot;</span> =<span class="st"> &quot;1&quot;</span>,</span>
<span id="cb5-61"><a href="process-pvz-data.html#cb5-61"></a>        <span class="st">&quot;No&quot;</span> =<span class="st"> &quot;2&quot;</span></span>
<span id="cb5-62"><a href="process-pvz-data.html#cb5-62"></a>      )</span>
<span id="cb5-63"><a href="process-pvz-data.html#cb5-63"></a>    ),</span>
<span id="cb5-64"><a href="process-pvz-data.html#cb5-64"></a>    </span>
<span id="cb5-65"><a href="process-pvz-data.html#cb5-65"></a>    <span class="dt">gender =</span> <span class="kw">fct_recode</span>(</span>
<span id="cb5-66"><a href="process-pvz-data.html#cb5-66"></a>      gender,</span>
<span id="cb5-67"><a href="process-pvz-data.html#cb5-67"></a>      <span class="st">&quot;Male&quot;</span> =<span class="st"> &quot;1&quot;</span>,</span>
<span id="cb5-68"><a href="process-pvz-data.html#cb5-68"></a>      <span class="st">&quot;Female&quot;</span> =<span class="st"> &quot;2&quot;</span>,</span>
<span id="cb5-69"><a href="process-pvz-data.html#cb5-69"></a>      <span class="st">&quot;Other&quot;</span> =<span class="st"> &quot;3&quot;</span>,</span>
<span id="cb5-70"><a href="process-pvz-data.html#cb5-70"></a>      <span class="st">&quot;Prefer not to say&quot;</span> =<span class="st"> &quot;4&quot;</span></span>
<span id="cb5-71"><a href="process-pvz-data.html#cb5-71"></a>    ),</span>
<span id="cb5-72"><a href="process-pvz-data.html#cb5-72"></a>    </span>
<span id="cb5-73"><a href="process-pvz-data.html#cb5-73"></a>    <span class="dt">country =</span> <span class="kw">fct_recode</span>(</span>
<span id="cb5-74"><a href="process-pvz-data.html#cb5-74"></a>      country,</span>
<span id="cb5-75"><a href="process-pvz-data.html#cb5-75"></a>      <span class="st">&quot;US&quot;</span> =<span class="st"> &quot;1&quot;</span>,</span>
<span id="cb5-76"><a href="process-pvz-data.html#cb5-76"></a>      <span class="st">&quot;UK&quot;</span> =<span class="st"> &quot;2&quot;</span>,</span>
<span id="cb5-77"><a href="process-pvz-data.html#cb5-77"></a>      <span class="st">&quot;Canada&quot;</span> =<span class="st"> &quot;5&quot;</span></span>
<span id="cb5-78"><a href="process-pvz-data.html#cb5-78"></a>    ),</span>
<span id="cb5-79"><a href="process-pvz-data.html#cb5-79"></a>    </span>
<span id="cb5-80"><a href="process-pvz-data.html#cb5-80"></a>    <span class="dt">survey_language =</span> <span class="kw">fct_recode</span>(</span>
<span id="cb5-81"><a href="process-pvz-data.html#cb5-81"></a>      survey_language,</span>
<span id="cb5-82"><a href="process-pvz-data.html#cb5-82"></a>      <span class="st">&quot;English&quot;</span> =<span class="st"> &quot;1&quot;</span>,</span>
<span id="cb5-83"><a href="process-pvz-data.html#cb5-83"></a>      <span class="st">&quot;French&quot;</span> =<span class="st"> &quot;2&quot;</span></span>
<span id="cb5-84"><a href="process-pvz-data.html#cb5-84"></a>    )</span>
<span id="cb5-85"><a href="process-pvz-data.html#cb5-85"></a>  )</span>
<span id="cb5-86"><a href="process-pvz-data.html#cb5-86"></a></span>
<span id="cb5-87"><a href="process-pvz-data.html#cb5-87"></a><span class="co"># Reverse scored items</span></span>
<span id="cb5-88"><a href="process-pvz-data.html#cb5-88"></a>survey &lt;-<span class="st"> </span>survey <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-89"><a href="process-pvz-data.html#cb5-89"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb5-90"><a href="process-pvz-data.html#cb5-90"></a>    <span class="kw">across</span>(</span>
<span id="cb5-91"><a href="process-pvz-data.html#cb5-91"></a>      <span class="kw">c</span>(</span>
<span id="cb5-92"><a href="process-pvz-data.html#cb5-92"></a>        <span class="kw">starts_with</span>(<span class="st">&quot;spane&quot;</span>), <span class="co"># 1 was never</span></span>
<span id="cb5-93"><a href="process-pvz-data.html#cb5-93"></a>        between_estimate, <span class="co">#  those estimates also had 1: much more than typically</span></span>
<span id="cb5-94"><a href="process-pvz-data.html#cb5-94"></a>        within_estimate,</span>
<span id="cb5-95"><a href="process-pvz-data.html#cb5-95"></a>        relatedness_<span class="dv">3</span>,</span>
<span id="cb5-96"><a href="process-pvz-data.html#cb5-96"></a>        enjoyment_<span class="dv">2</span>,</span>
<span id="cb5-97"><a href="process-pvz-data.html#cb5-97"></a>        enjoyment_<span class="dv">3</span></span>
<span id="cb5-98"><a href="process-pvz-data.html#cb5-98"></a>      ),</span>
<span id="cb5-99"><a href="process-pvz-data.html#cb5-99"></a>      <span class="op">~</span><span class="st"> </span><span class="dv">8</span> <span class="op">-</span><span class="st"> </span>.x</span>
<span id="cb5-100"><a href="process-pvz-data.html#cb5-100"></a>    )</span>
<span id="cb5-101"><a href="process-pvz-data.html#cb5-101"></a>  )</span>
<span id="cb5-102"><a href="process-pvz-data.html#cb5-102"></a></span>
<span id="cb5-103"><a href="process-pvz-data.html#cb5-103"></a><span class="co"># Indicators for straightliners</span></span>
<span id="cb5-104"><a href="process-pvz-data.html#cb5-104"></a>survey &lt;-<span class="st"> </span>survey <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-105"><a href="process-pvz-data.html#cb5-105"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="kw">across</span>(<span class="kw">contains</span>(<span class="st">&quot;straightliner&quot;</span>), <span class="op">~</span>.x<span class="op">==</span><span class="dv">1</span>))</span></code></pre></div>
<p>Then we create mean indices for the scales.
SPANE has positive affect, negative affect, and an affect balance score (subtract negative from positive).</p>
<<<<<<< HEAD
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="process-pvz-data.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># General SPANE</span></span>
<span id="cb6-2"><a href="process-pvz-data.html#cb6-2" aria-hidden="true" tabindex="-1"></a>survey <span class="ot">&lt;-</span> </span>
<span id="cb6-3"><a href="process-pvz-data.html#cb6-3" aria-hidden="true" tabindex="-1"></a>  survey <span class="sc">%&gt;%</span> </span>
<span id="cb6-4"><a href="process-pvz-data.html#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb6-5"><a href="process-pvz-data.html#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">spane_positive =</span> <span class="fu">rowMeans</span>(</span>
<span id="cb6-6"><a href="process-pvz-data.html#cb6-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(</span>
<span id="cb6-7"><a href="process-pvz-data.html#cb6-7" aria-hidden="true" tabindex="-1"></a>        .,</span>
<span id="cb6-8"><a href="process-pvz-data.html#cb6-8" aria-hidden="true" tabindex="-1"></a>        spane_1,</span>
<span id="cb6-9"><a href="process-pvz-data.html#cb6-9" aria-hidden="true" tabindex="-1"></a>        spane_3,</span>
<span id="cb6-10"><a href="process-pvz-data.html#cb6-10" aria-hidden="true" tabindex="-1"></a>        spane_5,</span>
<span id="cb6-11"><a href="process-pvz-data.html#cb6-11" aria-hidden="true" tabindex="-1"></a>        spane_7,</span>
<span id="cb6-12"><a href="process-pvz-data.html#cb6-12" aria-hidden="true" tabindex="-1"></a>        spane_10,</span>
<span id="cb6-13"><a href="process-pvz-data.html#cb6-13" aria-hidden="true" tabindex="-1"></a>        spane_12</span>
<span id="cb6-14"><a href="process-pvz-data.html#cb6-14" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb6-15"><a href="process-pvz-data.html#cb6-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">na.rm =</span> <span class="cn">TRUE</span></span>
<span id="cb6-16"><a href="process-pvz-data.html#cb6-16" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb6-17"><a href="process-pvz-data.html#cb6-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">spane_negative =</span> <span class="fu">rowMeans</span>(</span>
<span id="cb6-18"><a href="process-pvz-data.html#cb6-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(</span>
<span id="cb6-19"><a href="process-pvz-data.html#cb6-19" aria-hidden="true" tabindex="-1"></a>        .,</span>
<span id="cb6-20"><a href="process-pvz-data.html#cb6-20" aria-hidden="true" tabindex="-1"></a>        spane_2,</span>
<span id="cb6-21"><a href="process-pvz-data.html#cb6-21" aria-hidden="true" tabindex="-1"></a>        spane_4,</span>
<span id="cb6-22"><a href="process-pvz-data.html#cb6-22" aria-hidden="true" tabindex="-1"></a>        spane_6,</span>
<span id="cb6-23"><a href="process-pvz-data.html#cb6-23" aria-hidden="true" tabindex="-1"></a>        spane_8,</span>
<span id="cb6-24"><a href="process-pvz-data.html#cb6-24" aria-hidden="true" tabindex="-1"></a>        spane_9,</span>
<span id="cb6-25"><a href="process-pvz-data.html#cb6-25" aria-hidden="true" tabindex="-1"></a>        spane_11</span>
<span id="cb6-26"><a href="process-pvz-data.html#cb6-26" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb6-27"><a href="process-pvz-data.html#cb6-27" aria-hidden="true" tabindex="-1"></a>      <span class="at">na.rm =</span> <span class="cn">TRUE</span></span>
<span id="cb6-28"><a href="process-pvz-data.html#cb6-28" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb6-29"><a href="process-pvz-data.html#cb6-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">spane_balance =</span> spane_positive <span class="sc">-</span> spane_negative</span>
<span id="cb6-30"><a href="process-pvz-data.html#cb6-30" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-31"><a href="process-pvz-data.html#cb6-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-32"><a href="process-pvz-data.html#cb6-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Motivations</span></span>
<span id="cb6-33"><a href="process-pvz-data.html#cb6-33" aria-hidden="true" tabindex="-1"></a>survey <span class="ot">&lt;-</span> survey <span class="sc">%&gt;%</span> </span>
<span id="cb6-34"><a href="process-pvz-data.html#cb6-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb6-35"><a href="process-pvz-data.html#cb6-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">autonomy =</span> <span class="fu">rowMeans</span>(</span>
<span id="cb6-36"><a href="process-pvz-data.html#cb6-36" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(., <span class="fu">starts_with</span>(<span class="st">&quot;autonomy&quot;</span>)), <span class="at">na.rm =</span> <span class="cn">TRUE</span></span>
<span id="cb6-37"><a href="process-pvz-data.html#cb6-37" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb6-38"><a href="process-pvz-data.html#cb6-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">competence =</span> <span class="fu">rowMeans</span>(</span>
<span id="cb6-39"><a href="process-pvz-data.html#cb6-39" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(., <span class="fu">starts_with</span>(<span class="st">&quot;competence&quot;</span>)), <span class="at">na.rm =</span> <span class="cn">TRUE</span></span>
<span id="cb6-40"><a href="process-pvz-data.html#cb6-40" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb6-41"><a href="process-pvz-data.html#cb6-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">relatedness =</span> <span class="fu">rowMeans</span>(</span>
<span id="cb6-42"><a href="process-pvz-data.html#cb6-42" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(., <span class="fu">starts_with</span>(<span class="st">&quot;relatedness&quot;</span>)), <span class="at">na.rm =</span> <span class="cn">TRUE</span></span>
<span id="cb6-43"><a href="process-pvz-data.html#cb6-43" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb6-44"><a href="process-pvz-data.html#cb6-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">enjoyment =</span> <span class="fu">rowMeans</span>(</span>
<span id="cb6-45"><a href="process-pvz-data.html#cb6-45" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(., <span class="fu">starts_with</span>(<span class="st">&quot;enjoyment&quot;</span>)), <span class="at">na.rm =</span> <span class="cn">TRUE</span></span>
<span id="cb6-46"><a href="process-pvz-data.html#cb6-46" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb6-47"><a href="process-pvz-data.html#cb6-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">extrinsic =</span> <span class="fu">rowMeans</span>(</span>
<span id="cb6-48"><a href="process-pvz-data.html#cb6-48" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(., <span class="fu">starts_with</span>(<span class="st">&quot;extrinsic&quot;</span>)), <span class="at">na.rm =</span> <span class="cn">TRUE</span></span>
<span id="cb6-49"><a href="process-pvz-data.html#cb6-49" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-50"><a href="process-pvz-data.html#cb6-50" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-51"><a href="process-pvz-data.html#cb6-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-52"><a href="process-pvz-data.html#cb6-52" aria-hidden="true" tabindex="-1"></a><span class="co"># SPANE because of playing game</span></span>
<span id="cb6-53"><a href="process-pvz-data.html#cb6-53" aria-hidden="true" tabindex="-1"></a>survey <span class="ot">&lt;-</span> survey <span class="sc">%&gt;%</span> </span>
<span id="cb6-54"><a href="process-pvz-data.html#cb6-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb6-55"><a href="process-pvz-data.html#cb6-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">spane_game_positive =</span> <span class="fu">rowMeans</span>(</span>
<span id="cb6-56"><a href="process-pvz-data.html#cb6-56" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(</span>
<span id="cb6-57"><a href="process-pvz-data.html#cb6-57" aria-hidden="true" tabindex="-1"></a>        .,</span>
<span id="cb6-58"><a href="process-pvz-data.html#cb6-58" aria-hidden="true" tabindex="-1"></a>        spane_game_1,</span>
<span id="cb6-59"><a href="process-pvz-data.html#cb6-59" aria-hidden="true" tabindex="-1"></a>        spane_game_3,</span>
<span id="cb6-60"><a href="process-pvz-data.html#cb6-60" aria-hidden="true" tabindex="-1"></a>        spane_game_5,</span>
<span id="cb6-61"><a href="process-pvz-data.html#cb6-61" aria-hidden="true" tabindex="-1"></a>        spane_game_7,</span>
<span id="cb6-62"><a href="process-pvz-data.html#cb6-62" aria-hidden="true" tabindex="-1"></a>        spane_game_10,</span>
<span id="cb6-63"><a href="process-pvz-data.html#cb6-63" aria-hidden="true" tabindex="-1"></a>        spane_game_12</span>
<span id="cb6-64"><a href="process-pvz-data.html#cb6-64" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb6-65"><a href="process-pvz-data.html#cb6-65" aria-hidden="true" tabindex="-1"></a>      <span class="at">na.rm =</span> <span class="cn">TRUE</span></span>
<span id="cb6-66"><a href="process-pvz-data.html#cb6-66" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb6-67"><a href="process-pvz-data.html#cb6-67" aria-hidden="true" tabindex="-1"></a>    <span class="at">spane_game_negative =</span> <span class="fu">rowMeans</span>(</span>
<span id="cb6-68"><a href="process-pvz-data.html#cb6-68" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(</span>
<span id="cb6-69"><a href="process-pvz-data.html#cb6-69" aria-hidden="true" tabindex="-1"></a>        .,</span>
<span id="cb6-70"><a href="process-pvz-data.html#cb6-70" aria-hidden="true" tabindex="-1"></a>        spane_game_2,</span>
<span id="cb6-71"><a href="process-pvz-data.html#cb6-71" aria-hidden="true" tabindex="-1"></a>        spane_game_4,</span>
<span id="cb6-72"><a href="process-pvz-data.html#cb6-72" aria-hidden="true" tabindex="-1"></a>        spane_game_6,</span>
<span id="cb6-73"><a href="process-pvz-data.html#cb6-73" aria-hidden="true" tabindex="-1"></a>        spane_game_8,</span>
<span id="cb6-74"><a href="process-pvz-data.html#cb6-74" aria-hidden="true" tabindex="-1"></a>        spane_game_9,</span>
<span id="cb6-75"><a href="process-pvz-data.html#cb6-75" aria-hidden="true" tabindex="-1"></a>        spane_game_11</span>
<span id="cb6-76"><a href="process-pvz-data.html#cb6-76" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb6-77"><a href="process-pvz-data.html#cb6-77" aria-hidden="true" tabindex="-1"></a>      <span class="at">na.rm =</span> <span class="cn">TRUE</span></span>
<span id="cb6-78"><a href="process-pvz-data.html#cb6-78" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb6-79"><a href="process-pvz-data.html#cb6-79" aria-hidden="true" tabindex="-1"></a>    <span class="at">spane_game_balance =</span> spane_game_positive <span class="sc">-</span> spane_game_negative</span>
<span id="cb6-80"><a href="process-pvz-data.html#cb6-80" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-81"><a href="process-pvz-data.html#cb6-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-82"><a href="process-pvz-data.html#cb6-82" aria-hidden="true" tabindex="-1"></a><span class="co"># Hours of estimated play</span></span>
<span id="cb6-83"><a href="process-pvz-data.html#cb6-83" aria-hidden="true" tabindex="-1"></a>survey <span class="ot">&lt;-</span> survey <span class="sc">%&gt;%</span></span>
<span id="cb6-84"><a href="process-pvz-data.html#cb6-84" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">active_play_minutes =</span> active_play_minutes <span class="sc">/</span> <span class="dv">60</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-85"><a href="process-pvz-data.html#cb6-85" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">active_play =</span> <span class="fu">rowSums</span>(<span class="fu">select</span>(., <span class="fu">starts_with</span>(<span class="st">&quot;active_play&quot;</span>)), <span class="at">na.rm =</span> T))</span></code></pre></div>
=======
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="process-pvz-data.html#cb6-1"></a><span class="co"># General SPANE</span></span>
<span id="cb6-2"><a href="process-pvz-data.html#cb6-2"></a>survey &lt;-<span class="st"> </span></span>
<span id="cb6-3"><a href="process-pvz-data.html#cb6-3"></a><span class="st">  </span>survey <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb6-4"><a href="process-pvz-data.html#cb6-4"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb6-5"><a href="process-pvz-data.html#cb6-5"></a>    <span class="dt">spane_positive =</span> <span class="kw">rowMeans</span>(</span>
<span id="cb6-6"><a href="process-pvz-data.html#cb6-6"></a>      <span class="kw">select</span>(</span>
<span id="cb6-7"><a href="process-pvz-data.html#cb6-7"></a>        .,</span>
<span id="cb6-8"><a href="process-pvz-data.html#cb6-8"></a>        spane_<span class="dv">1</span>,</span>
<span id="cb6-9"><a href="process-pvz-data.html#cb6-9"></a>        spane_<span class="dv">3</span>,</span>
<span id="cb6-10"><a href="process-pvz-data.html#cb6-10"></a>        spane_<span class="dv">5</span>,</span>
<span id="cb6-11"><a href="process-pvz-data.html#cb6-11"></a>        spane_<span class="dv">7</span>,</span>
<span id="cb6-12"><a href="process-pvz-data.html#cb6-12"></a>        spane_<span class="dv">10</span>,</span>
<span id="cb6-13"><a href="process-pvz-data.html#cb6-13"></a>        spane_<span class="dv">12</span></span>
<span id="cb6-14"><a href="process-pvz-data.html#cb6-14"></a>      ),</span>
<span id="cb6-15"><a href="process-pvz-data.html#cb6-15"></a>      <span class="dt">na.rm =</span> <span class="ot">TRUE</span></span>
<span id="cb6-16"><a href="process-pvz-data.html#cb6-16"></a>    ),</span>
<span id="cb6-17"><a href="process-pvz-data.html#cb6-17"></a>    <span class="dt">spane_negative =</span> <span class="kw">rowMeans</span>(</span>
<span id="cb6-18"><a href="process-pvz-data.html#cb6-18"></a>      <span class="kw">select</span>(</span>
<span id="cb6-19"><a href="process-pvz-data.html#cb6-19"></a>        .,</span>
<span id="cb6-20"><a href="process-pvz-data.html#cb6-20"></a>        spane_<span class="dv">2</span>,</span>
<span id="cb6-21"><a href="process-pvz-data.html#cb6-21"></a>        spane_<span class="dv">4</span>,</span>
<span id="cb6-22"><a href="process-pvz-data.html#cb6-22"></a>        spane_<span class="dv">6</span>,</span>
<span id="cb6-23"><a href="process-pvz-data.html#cb6-23"></a>        spane_<span class="dv">8</span>,</span>
<span id="cb6-24"><a href="process-pvz-data.html#cb6-24"></a>        spane_<span class="dv">9</span>,</span>
<span id="cb6-25"><a href="process-pvz-data.html#cb6-25"></a>        spane_<span class="dv">11</span></span>
<span id="cb6-26"><a href="process-pvz-data.html#cb6-26"></a>      ),</span>
<span id="cb6-27"><a href="process-pvz-data.html#cb6-27"></a>      <span class="dt">na.rm =</span> <span class="ot">TRUE</span></span>
<span id="cb6-28"><a href="process-pvz-data.html#cb6-28"></a>    ),</span>
<span id="cb6-29"><a href="process-pvz-data.html#cb6-29"></a>    <span class="dt">spane_balance =</span> spane_positive <span class="op">-</span><span class="st"> </span>spane_negative</span>
<span id="cb6-30"><a href="process-pvz-data.html#cb6-30"></a>  )</span>
<span id="cb6-31"><a href="process-pvz-data.html#cb6-31"></a></span>
<span id="cb6-32"><a href="process-pvz-data.html#cb6-32"></a><span class="co"># Motivations</span></span>
<span id="cb6-33"><a href="process-pvz-data.html#cb6-33"></a>survey &lt;-<span class="st"> </span>survey <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb6-34"><a href="process-pvz-data.html#cb6-34"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb6-35"><a href="process-pvz-data.html#cb6-35"></a>    <span class="dt">autonomy =</span> <span class="kw">rowMeans</span>(</span>
<span id="cb6-36"><a href="process-pvz-data.html#cb6-36"></a>      <span class="kw">select</span>(., <span class="kw">starts_with</span>(<span class="st">&quot;autonomy&quot;</span>)), <span class="dt">na.rm =</span> <span class="ot">TRUE</span></span>
<span id="cb6-37"><a href="process-pvz-data.html#cb6-37"></a>    ),</span>
<span id="cb6-38"><a href="process-pvz-data.html#cb6-38"></a>    <span class="dt">competence =</span> <span class="kw">rowMeans</span>(</span>
<span id="cb6-39"><a href="process-pvz-data.html#cb6-39"></a>      <span class="kw">select</span>(., <span class="kw">starts_with</span>(<span class="st">&quot;competence&quot;</span>)), <span class="dt">na.rm =</span> <span class="ot">TRUE</span></span>
<span id="cb6-40"><a href="process-pvz-data.html#cb6-40"></a>    ),</span>
<span id="cb6-41"><a href="process-pvz-data.html#cb6-41"></a>    <span class="dt">relatedness =</span> <span class="kw">rowMeans</span>(</span>
<span id="cb6-42"><a href="process-pvz-data.html#cb6-42"></a>      <span class="kw">select</span>(., <span class="kw">starts_with</span>(<span class="st">&quot;relatedness&quot;</span>)), <span class="dt">na.rm =</span> <span class="ot">TRUE</span></span>
<span id="cb6-43"><a href="process-pvz-data.html#cb6-43"></a>    ),</span>
<span id="cb6-44"><a href="process-pvz-data.html#cb6-44"></a>    <span class="dt">enjoyment =</span> <span class="kw">rowMeans</span>(</span>
<span id="cb6-45"><a href="process-pvz-data.html#cb6-45"></a>      <span class="kw">select</span>(., <span class="kw">starts_with</span>(<span class="st">&quot;enjoyment&quot;</span>)), <span class="dt">na.rm =</span> <span class="ot">TRUE</span></span>
<span id="cb6-46"><a href="process-pvz-data.html#cb6-46"></a>    ),</span>
<span id="cb6-47"><a href="process-pvz-data.html#cb6-47"></a>    <span class="dt">extrinsic =</span> <span class="kw">rowMeans</span>(</span>
<span id="cb6-48"><a href="process-pvz-data.html#cb6-48"></a>      <span class="kw">select</span>(., <span class="kw">starts_with</span>(<span class="st">&quot;extrinsic&quot;</span>)), <span class="dt">na.rm =</span> <span class="ot">TRUE</span></span>
<span id="cb6-49"><a href="process-pvz-data.html#cb6-49"></a>    )</span>
<span id="cb6-50"><a href="process-pvz-data.html#cb6-50"></a>  )</span>
<span id="cb6-51"><a href="process-pvz-data.html#cb6-51"></a></span>
<span id="cb6-52"><a href="process-pvz-data.html#cb6-52"></a><span class="co"># SPANE because of playing game</span></span>
<span id="cb6-53"><a href="process-pvz-data.html#cb6-53"></a>survey &lt;-<span class="st"> </span>survey <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb6-54"><a href="process-pvz-data.html#cb6-54"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb6-55"><a href="process-pvz-data.html#cb6-55"></a>    <span class="dt">spane_game_positive =</span> <span class="kw">rowMeans</span>(</span>
<span id="cb6-56"><a href="process-pvz-data.html#cb6-56"></a>      <span class="kw">select</span>(</span>
<span id="cb6-57"><a href="process-pvz-data.html#cb6-57"></a>        .,</span>
<span id="cb6-58"><a href="process-pvz-data.html#cb6-58"></a>        spane_game_<span class="dv">1</span>,</span>
<span id="cb6-59"><a href="process-pvz-data.html#cb6-59"></a>        spane_game_<span class="dv">3</span>,</span>
<span id="cb6-60"><a href="process-pvz-data.html#cb6-60"></a>        spane_game_<span class="dv">5</span>,</span>
<span id="cb6-61"><a href="process-pvz-data.html#cb6-61"></a>        spane_game_<span class="dv">7</span>,</span>
<span id="cb6-62"><a href="process-pvz-data.html#cb6-62"></a>        spane_game_<span class="dv">10</span>,</span>
<span id="cb6-63"><a href="process-pvz-data.html#cb6-63"></a>        spane_game_<span class="dv">12</span></span>
<span id="cb6-64"><a href="process-pvz-data.html#cb6-64"></a>      ),</span>
<span id="cb6-65"><a href="process-pvz-data.html#cb6-65"></a>      <span class="dt">na.rm =</span> <span class="ot">TRUE</span></span>
<span id="cb6-66"><a href="process-pvz-data.html#cb6-66"></a>    ),</span>
<span id="cb6-67"><a href="process-pvz-data.html#cb6-67"></a>    <span class="dt">spane_game_negative =</span> <span class="kw">rowMeans</span>(</span>
<span id="cb6-68"><a href="process-pvz-data.html#cb6-68"></a>      <span class="kw">select</span>(</span>
<span id="cb6-69"><a href="process-pvz-data.html#cb6-69"></a>        .,</span>
<span id="cb6-70"><a href="process-pvz-data.html#cb6-70"></a>        spane_game_<span class="dv">2</span>,</span>
<span id="cb6-71"><a href="process-pvz-data.html#cb6-71"></a>        spane_game_<span class="dv">4</span>,</span>
<span id="cb6-72"><a href="process-pvz-data.html#cb6-72"></a>        spane_game_<span class="dv">6</span>,</span>
<span id="cb6-73"><a href="process-pvz-data.html#cb6-73"></a>        spane_game_<span class="dv">8</span>,</span>
<span id="cb6-74"><a href="process-pvz-data.html#cb6-74"></a>        spane_game_<span class="dv">9</span>,</span>
<span id="cb6-75"><a href="process-pvz-data.html#cb6-75"></a>        spane_game_<span class="dv">11</span></span>
<span id="cb6-76"><a href="process-pvz-data.html#cb6-76"></a>      ),</span>
<span id="cb6-77"><a href="process-pvz-data.html#cb6-77"></a>      <span class="dt">na.rm =</span> <span class="ot">TRUE</span></span>
<span id="cb6-78"><a href="process-pvz-data.html#cb6-78"></a>    ),</span>
<span id="cb6-79"><a href="process-pvz-data.html#cb6-79"></a>    <span class="dt">spane_game_balance =</span> spane_game_positive <span class="op">-</span><span class="st"> </span>spane_game_negative</span>
<span id="cb6-80"><a href="process-pvz-data.html#cb6-80"></a>  )</span>
<span id="cb6-81"><a href="process-pvz-data.html#cb6-81"></a></span>
<span id="cb6-82"><a href="process-pvz-data.html#cb6-82"></a><span class="co"># Hours of estimated play</span></span>
<span id="cb6-83"><a href="process-pvz-data.html#cb6-83"></a>survey &lt;-<span class="st"> </span>survey <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb6-84"><a href="process-pvz-data.html#cb6-84"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb6-85"><a href="process-pvz-data.html#cb6-85"></a>    <span class="dt">active_play =</span> active_play_hours <span class="op">+</span><span class="st"> </span>(active_play_minutes <span class="op">/</span><span class="st"> </span><span class="dv">60</span>)</span>
<span id="cb6-86"><a href="process-pvz-data.html#cb6-86"></a>  )</span></code></pre></div>
>>>>>>> f449c935d496bcb159c5533847257a56a9918a85
</div>
</div>
<div id="game-time" class="section level3">
<h3><span class="header-section-number">2.2.2</span> Game time</h3>
<p>Then we get to the telemetry files.</p>
<p>The game time data are the most complicated. We work on it first because the times are needed for some of the other telemetry files.
Note: The raw excel files on the OSF (or downloaded as zip files above) have a detailed data map as the second tab of the file.
These serve as a codebook.
The data show us when a player started a session and how long that session lasted, plus whether they played the game in multiplayer or single player.
The variables:</p>
<ul>
<li><code>player_id</code> = Unique identifier for a player.</li>
<li><code>platform</code> = One of the major platforms, eg. PC, Playstation, Xbox.</li>
<li><code>game_start_time</code> = Session start date time.</li>
<li><code>game_end_time</code> = Session end date time.</li>
<li><code>game_mode</code> = The game mode, primarily multiplayer or single player.</li>
<li><code>game_type</code> = Notes if the game is offline/online and if it is splitscreen</li>
<li><code>game_level</code> = The level’s name where the session took place.</li>
<li><code>game_session</code> = Unique identifier for a game session.</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="process-pvz-data.html#cb7-1"></a>game_time &lt;-<span class="st"> </span><span class="kw">read_both_waves</span>(<span class="st">&quot;OII_PVZ_Game_Time&quot;</span>)</span>
<span id="cb7-2"><a href="process-pvz-data.html#cb7-2"></a><span class="kw">glimpse</span>(game_time)</span></code></pre></div>
<pre><code>## Rows: 32,596
## Columns: 11
## $ wave            &lt;chr&gt; &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;...
## $ player_id       &lt;chr&gt; &quot;D192BF3702CE18EC87666BB7AB28B5236AA542CB6D0020870C...
## $ platform        &lt;chr&gt; &quot;XBox One&quot;, &quot;XBox One&quot;, &quot;XBox One&quot;, &quot;XBox One&quot;, &quot;XB...
## $ game_start_time &lt;dttm&gt; 2020-09-09 21:47:05, 2020-09-09 21:32:08, 2020-09-...
## $ game_end_time   &lt;dttm&gt; 2020-09-09 21:34:00, 2020-09-09 21:34:00, 2020-09-...
## $ game_mode       &lt;chr&gt; &quot;multiplayer&quot;, &quot;multiplayer&quot;, &quot;multiplayer&quot;, &quot;multi...
## $ game_type       &lt;chr&gt; &quot;Online&quot;, &quot;Online&quot;, &quot;Online Multiplayer&quot;, &quot;Online&quot;,...
## $ game_level      &lt;chr&gt; NA, NA, &quot;factory&quot;, &quot;turning point&quot;, NA, NA, &quot;the sl...
## $ game_level_key  &lt;chr&gt; &quot;dsub_social_terrain_summer&quot;, &quot;dsub_social_terrain_...
## $ game_session    &lt;chr&gt; &quot;58fd5277c15ecadd202648a1672c94cce382d2ab9fad13e8fc...
## $ server_session  &lt;chr&gt; &quot;00e9acb4592ae39fad7a9da466c0ce4ba2f5a3af82de8b4f75...</code></pre>
<p>A game session starts when a player starts playing.
That means <code>game_session</code> records when a match starts, which includes going to the Hub World (i.e., a world inside the game where players can decide what to do next).
Game sessions can be shared between players when they’re playing multiplayer, but should be unique to a <code>player_id</code> when in single player.
However, it’s not easy to say when a session ends for technical reasons.
Ideally, we’d have one game session per row.
Because it’s hard to determine when a session ends, there are instances where a given player has multiple rows with the same <code>game_session</code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="process-pvz-data.html#cb9-1"></a>counts &lt;-<span class="st"> </span>game_time <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb9-2"><a href="process-pvz-data.html#cb9-2"></a><span class="st">  </span><span class="kw">count</span>(player_id, game_session, <span class="dt">sort =</span> T)</span></code></pre></div>
<p>For example, the player below has 107 rows with identical <code>player_id</code> and <code>game_session</code>.
Some of those rows have identical start and end times for the session, but the majority are in “chunks” with the same start times, but slightly different end times.
This pattern shows the problems with determining the end of a session.
See the figure below to see how the rows overlap in their game durations.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="process-pvz-data.html#cb10-1"></a><span class="co"># example of one player_idXgame_session with multiple entries</span></span>
<span id="cb10-2"><a href="process-pvz-data.html#cb10-2"></a>tmp &lt;-<span class="st"> </span>counts <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb10-3"><a href="process-pvz-data.html#cb10-3"></a><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb10-4"><a href="process-pvz-data.html#cb10-4"></a><span class="st">  </span><span class="kw">left_join</span>(game_time) <span class="op">%&gt;%</span></span>
<span id="cb10-5"><a href="process-pvz-data.html#cb10-5"></a><span class="st">  </span><span class="kw">arrange</span>(game_start_time, game_end_time)</span>
<span id="cb10-6"><a href="process-pvz-data.html#cb10-6"></a></span>
<span id="cb10-7"><a href="process-pvz-data.html#cb10-7"></a>tmp <span class="op">%&gt;%</span><span class="st">   </span></span>
<span id="cb10-8"><a href="process-pvz-data.html#cb10-8"></a><span class="st">  </span><span class="kw">rowid_to_column</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb10-9"><a href="process-pvz-data.html#cb10-9"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(game_start_time, rowid, <span class="dt">col =</span> game_session)) <span class="op">+</span></span>
<span id="cb10-10"><a href="process-pvz-data.html#cb10-10"></a><span class="st">  </span><span class="kw">geom_segment</span>(<span class="kw">aes</span>(<span class="dt">xend =</span> game_end_time, <span class="dt">yend =</span> rowid)) <span class="op">+</span></span>
<span id="cb10-11"><a href="process-pvz-data.html#cb10-11"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="st">&quot;player_id&quot;</span>, <span class="dt">labeller =</span> label_both) <span class="op">+</span></span>
<span id="cb10-12"><a href="process-pvz-data.html#cb10-12"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span></code></pre></div>
<p><img src="02-preprocess-study-1_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>For those instances where a player has multiple (overlapping) game sessions, we’ll simply use the earliest start time and latest end time of that “super-session” to collapse all overlapping rows into one.
For that, we look for each combination of <code>player_id</code> and <code>game_session</code> and replace <code>game_start_time</code> with the earliest time within that super-session; likewise, we replace <code>game_end_time</code> with the latest time within that super-session.
If a player only has one row, they’ll maintain that one row this way.
If a player has multiple rows, they’re collapsed into one row that encompasses the game durations of all rows.
See the figure below which now only has one duration for that player, which goes from the minimum to the maximum time of the previous figure.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="process-pvz-data.html#cb11-1"></a><span class="co"># Key point: Replace start and end times with first and last start/end time</span></span>
<span id="cb11-2"><a href="process-pvz-data.html#cb11-2"></a><span class="co">#  then take unique rows. This results in 1 row per session.</span></span>
<span id="cb11-3"><a href="process-pvz-data.html#cb11-3"></a>tmp &lt;-<span class="st"> </span>tmp <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb11-4"><a href="process-pvz-data.html#cb11-4"></a><span class="st">  </span><span class="kw">group_by</span>(player_id, game_session) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb11-5"><a href="process-pvz-data.html#cb11-5"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb11-6"><a href="process-pvz-data.html#cb11-6"></a>    <span class="dt">game_start_time =</span> <span class="kw">min</span>(game_start_time),</span>
<span id="cb11-7"><a href="process-pvz-data.html#cb11-7"></a>    <span class="dt">game_end_time =</span> <span class="kw">max</span>(game_end_time)</span>
<span id="cb11-8"><a href="process-pvz-data.html#cb11-8"></a>  ) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb11-9"><a href="process-pvz-data.html#cb11-9"></a><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span>) <span class="co"># distinct() didn&#39;t work when there were different levels within the same session</span></span>
<span id="cb11-10"><a href="process-pvz-data.html#cb11-10"></a><span class="kw">last_plot</span>() <span class="op">%+%</span><span class="st"> </span><span class="kw">mutate</span>(tmp, <span class="dt">rowid =</span> <span class="dv">1</span><span class="op">:</span><span class="kw">n</span>())</span></code></pre></div>
<p><img src="02-preprocess-study-1_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>Next, we apply this procedure to all players.
However, some start times are missing, which won’t allow us to compute duration for that session.
Whenever a <code>game_start_time</code> is missing, we’ll set it to the end time of that session.
That creates game sessions with a duration of 0, which we’ll set to <code>NA</code> again later.
(Note: <code>game_end_time</code> doesn’t have missing values, which is why we can use <code>coalesce</code>)</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="process-pvz-data.html#cb12-1"></a>game_time &lt;-<span class="st"> </span>game_time <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb12-2"><a href="process-pvz-data.html#cb12-2"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb12-3"><a href="process-pvz-data.html#cb12-3"></a>    <span class="dt">game_start_time =</span> <span class="kw">coalesce</span>(</span>
<span id="cb12-4"><a href="process-pvz-data.html#cb12-4"></a>      game_start_time, game_end_time</span>
<span id="cb12-5"><a href="process-pvz-data.html#cb12-5"></a>    )</span>
<span id="cb12-6"><a href="process-pvz-data.html#cb12-6"></a>  )</span>
<span id="cb12-7"><a href="process-pvz-data.html#cb12-7"></a></span>
<span id="cb12-8"><a href="process-pvz-data.html#cb12-8"></a><span class="co"># now collapse the rows</span></span>
<span id="cb12-9"><a href="process-pvz-data.html#cb12-9"></a>game_time &lt;-<span class="st"> </span>game_time <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb12-10"><a href="process-pvz-data.html#cb12-10"></a><span class="st">  </span><span class="kw">group_by</span>(player_id, game_session) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb12-11"><a href="process-pvz-data.html#cb12-11"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb12-12"><a href="process-pvz-data.html#cb12-12"></a>    <span class="dt">game_start_time =</span> <span class="kw">min</span>(game_start_time),</span>
<span id="cb12-13"><a href="process-pvz-data.html#cb12-13"></a>    <span class="dt">game_end_time =</span> <span class="kw">max</span>(game_end_time),</span>
<span id="cb12-14"><a href="process-pvz-data.html#cb12-14"></a>  ) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb12-15"><a href="process-pvz-data.html#cb12-15"></a><span class="st">  </span><span class="co"># Take the first of each (identical) person-session combo</span></span>
<span id="cb12-16"><a href="process-pvz-data.html#cb12-16"></a><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb12-17"><a href="process-pvz-data.html#cb12-17"></a><span class="st">  </span><span class="kw">ungroup</span>()</span></code></pre></div>
<p>Then we save the file.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="process-pvz-data.html#cb13-1"></a><span class="kw">write_rds</span>(game_time, <span class="kw">here</span>(<span class="st">&quot;data/ea/game_time.rds&quot;</span>))</span></code></pre></div>
</div>
<div id="authentications" class="section level3">
<h3><span class="header-section-number">2.2.3</span> Authentications</h3>
<p>The authentifications data set logs events when a player (<code>player_id</code>) logs into the game.
The variables are:</p>
<ul>
<li><code>player_id</code> = Unique identifier for a player.</li>
<li><code>platform</code> = One of the major platforms, eg. PC, Playstation, Xbox.</li>
<li><code>date</code> = Date of the login.</li>
<li><code>country</code> = Country the login came from.</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="process-pvz-data.html#cb14-1"></a>authentications &lt;-<span class="st"> </span><span class="kw">read_both_waves</span>(<span class="st">&quot;OII_PVZ_Authentications&quot;</span>)</span>
<span id="cb14-2"><a href="process-pvz-data.html#cb14-2"></a><span class="kw">glimpse</span>(authentications)</span></code></pre></div>
<pre><code>## Rows: 3,203
## Columns: 5
## $ wave      &lt;chr&gt; &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1...
## $ player_id &lt;chr&gt; &quot;79A048DF15507E4CF96CFC380AF402DD6AA542CB6D0020870CCE3A13...
## $ platform  &lt;chr&gt; &quot;Playstation 4&quot;, &quot;XBox One&quot;, &quot;Playstation 4&quot;, &quot;XBox One&quot;,...
## $ date      &lt;date&gt; 2020-09-22, 2020-09-22, 2020-09-22, 2020-09-22, 2020-09-...
## $ country   &lt;chr&gt; &quot;United States&quot;, &quot;[Unknown]&quot;, &quot;[Unknown]&quot;, &quot;United States...</code></pre>
<p>First, we only keep authentications of players who also participated in the survey.
Then we count how many times players logged in to PvZ.
In the survey, players reflected on their well-being and gaming in the past two weeks, so we’ll only count those game events that occurred within 14 days prior to the time the participant took the survey.
The <code>date</code> variable in <code>authentications</code> doesn’t have time, so we’ll make it easy and also reduce <code>start_time</code> in the survey to a date (without time of day).</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="process-pvz-data.html#cb16-1"></a>authentications &lt;-<span class="st"> </span>authentications <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb16-2"><a href="process-pvz-data.html#cb16-2"></a><span class="st">  </span><span class="co"># add the start date by player ID</span></span>
<span id="cb16-3"><a href="process-pvz-data.html#cb16-3"></a><span class="st">  </span><span class="kw">left_join</span>(<span class="kw">select</span>(survey, player_id, start_date)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb16-4"><a href="process-pvz-data.html#cb16-4"></a><span class="st">  </span><span class="co"># only keep authentication events that occured within 14 days before the survey was taken</span></span>
<span id="cb16-5"><a href="process-pvz-data.html#cb16-5"></a><span class="st">  </span><span class="kw">filter</span>(date <span class="op">&gt;=</span><span class="st"> </span>(<span class="kw">as_date</span>(start_date) <span class="op">-</span><span class="st"> </span><span class="kw">days</span>(<span class="dv">14</span>)) ) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb16-6"><a href="process-pvz-data.html#cb16-6"></a><span class="st">  </span><span class="kw">count</span>(player_id, <span class="dt">name =</span> <span class="st">&quot;authentications&quot;</span>)</span></code></pre></div>
</div>
<div id="characters" class="section level3">
<h3><span class="header-section-number">2.2.4</span> Characters</h3>
<p>The characters data provides performance stats for a player while they play as a specific character in the game.
The variables are:</p>
<ul>
<li><code>player_id</code></li>
<li><code>platform</code> = One of the major platforms, eg. PC, Playstation, Xbox.</li>
<li><code>game_session</code> = Unique identifier for a game session.</li>
<li><code>game_mode</code> = The game mode, primarily multiplayer or single player.</li>
<li><code>game_type</code> = Notes if the game is offline/online and if it is splitscreen</li>
<li><code>game_level</code> = The level’s name where the session took place.</li>
<li><code>character_class</code> = The character key noting the character used.</li>
<li><code>total_kill_count</code> = Total kills earned by the player.</li>
<li><code>total_death_count</code> = Total deaths suffered by the player.</li>
<li><code>score</code> = Total score earned by the player.</li>
<li><code>damage_dealt</code> = Total damage dealt by the player.</li>
<li><code>critical_hit_count</code> = Number of critical hits earned by the player.</li>
<li><code>shots_fired</code> = Number of shots fired by the player.</li>
<li><code>shots_hit</code> = Number of shots by the player which successfully hit.</li>
</ul>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="process-pvz-data.html#cb17-1"></a>characters &lt;-<span class="st"> </span><span class="kw">read_both_waves</span>(<span class="st">&quot;OII_PVZ_Character&quot;</span>)</span>
<span id="cb17-2"><a href="process-pvz-data.html#cb17-2"></a><span class="kw">glimpse</span>(characters)</span></code></pre></div>
<pre><code>## Rows: 36,621
## Columns: 17
## $ wave               &lt;chr&gt; &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;...
## $ player_id          &lt;chr&gt; &quot;0F14B8C5C551BEA797E708E16C58ED416AA542CB6D00208...
## $ platform           &lt;chr&gt; &quot;Playstation 4&quot;, &quot;Playstation 4&quot;, &quot;Playstation 4...
## $ game_session       &lt;chr&gt; &quot;592bcde64c679245ef328684e8eb531cd38fbc5bceb3a69...
## $ server_session     &lt;chr&gt; &quot;828c69c37a677e79ab0aac2a7b3c8bfcdc56d1ac3080a0e...
## $ game_mode          &lt;chr&gt; &quot;multiplayer&quot;, &quot;multiplayer&quot;, &quot;multiplayer&quot;, &quot;mu...
## $ game_type          &lt;chr&gt; &quot;Online&quot;, &quot;Online&quot;, &quot;Offline&quot;, &quot;Online&quot;, &quot;Online...
## $ game_level         &lt;chr&gt; &quot;pipeline&quot;, &quot;temple&quot;, &quot;pipeline&quot;, &quot;dugout&quot;, NA, ...
## $ game_level_key     &lt;chr&gt; &quot;dsub_region_cheesemines&quot;, &quot;dsub_tvm_dreadwood&quot;,...
## $ character_class    &lt;chr&gt; &quot;[Unknown]&quot;, &quot;mpplant_mushroom&quot;, &quot;mpplant_citron...
## $ total_kill_count   &lt;dbl&gt; NA, 7, 168, 8, NA, 10, NA, NA, 0, 63, 0, NA, 10,...
## $ total_death_count  &lt;dbl&gt; NA, 5, 0, 6, NA, 0, NA, NA, 0, 0, 1, NA, 7, NA, ...
## $ score              &lt;dbl&gt; NA, 325, 11950, 1270, NA, 799, NA, NA, 0, 3003, ...
## $ damage_dealt       &lt;dbl&gt; NA, 810, 20920, 896, NA, 1948, NA, NA, 0, 10745,...
## $ critical_hit_count &lt;dbl&gt; NA, 0, 1209, 54, NA, 84, NA, NA, 0, 101, 18, NA,...
## $ shots_fired        &lt;dbl&gt; NA, 236, 18639, 562, NA, 699, NA, NA, 0, 754, 30...
## $ shots_hit          &lt;dbl&gt; NA, 45, 5097, 91, NA, 220, NA, NA, 0, 347, 21, N...</code></pre>
<p>We do the same for the performance stats in the <code>characters</code> data set.
The data set doesn’t have a start time for the game sessions, so we’ll add those start times by matching the <code>player_id</code> and <code>game_session</code> with those of the <code>game_time</code> data set, which has start times for the game sessions, thereby adding the <code>game_start_time</code> for a game session.
Then we include only those game sessions that happened within 14 days of a participant taking the survey.
After that, we sum up all player stats for that period.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="process-pvz-data.html#cb19-1"></a>characters &lt;-<span class="st"> </span>characters <span class="op">%&gt;%</span></span>
<span id="cb19-2"><a href="process-pvz-data.html#cb19-2"></a><span class="st">  </span><span class="kw">left_join</span>(</span>
<span id="cb19-3"><a href="process-pvz-data.html#cb19-3"></a>    game_time <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb19-4"><a href="process-pvz-data.html#cb19-4"></a><span class="st">      </span><span class="kw">select</span>(player_id, game_session, game_start_time),</span>
<span id="cb19-5"><a href="process-pvz-data.html#cb19-5"></a>    <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;player_id&quot;</span>, <span class="st">&quot;game_session&quot;</span>)</span>
<span id="cb19-6"><a href="process-pvz-data.html#cb19-6"></a>  ) <span class="op">%&gt;%</span></span>
<span id="cb19-7"><a href="process-pvz-data.html#cb19-7"></a><span class="st">  </span><span class="kw">left_join</span>(<span class="kw">select</span>(survey, player_id, start_date)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb19-8"><a href="process-pvz-data.html#cb19-8"></a><span class="st">  </span><span class="kw">filter</span>(game_start_time <span class="op">&gt;=</span><span class="st"> </span>(start_date <span class="op">-</span><span class="st"> </span><span class="kw">days</span>(<span class="dv">14</span>))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb19-9"><a href="process-pvz-data.html#cb19-9"></a><span class="st">  </span><span class="kw">group_by</span>(player_id) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb19-10"><a href="process-pvz-data.html#cb19-10"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="kw">across</span>(total_kill_count<span class="op">:</span>shots_hit, sum, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb19-11"><a href="process-pvz-data.html#cb19-11"></a><span class="st">  </span><span class="kw">ungroup</span>()</span></code></pre></div>
</div>
<div id="friends" class="section level3">
<h3><span class="header-section-number">2.2.5</span> Friends</h3>
<p>The friends data show when two players became friends and at what time (in PvZ, not on the platform?).
The variables:</p>
<ul>
<li><code>player_id</code> = Unique identifier for a player.</li>
<li><code>friend_player_id</code> = Unique identifier for a player, who is marked as a friend of the player_id.</li>
<li><code>date_time</code> = The date time when the friend invite was accepted.</li>
</ul>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="process-pvz-data.html#cb20-1"></a>friends &lt;-<span class="st"> </span><span class="kw">read_both_waves</span>(<span class="st">&quot;OII_PVZ_Friends&quot;</span>)</span>
<span id="cb20-2"><a href="process-pvz-data.html#cb20-2"></a><span class="kw">write_rds</span>(friends, <span class="kw">here</span>(<span class="st">&quot;data/ea/friends.rds&quot;</span>))</span>
<span id="cb20-3"><a href="process-pvz-data.html#cb20-3"></a><span class="kw">glimpse</span>(friends)</span></code></pre></div>
<pre><code>## Rows: 10,993
## Columns: 4
## $ wave             &lt;chr&gt; &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, ...
## $ player_id        &lt;chr&gt; &quot;BF32A4EB8706270BA4A9974968D8B3CE6AA542CB6D0020870...
## $ friend_player_id &lt;chr&gt; &quot;f4a77d3e43c86a0a40c389aaf89188b9019a3814e7302b09b...
## $ event_date_time  &lt;dttm&gt; 2020-09-18 20:05:36, 2020-09-23 17:40:22, 2020-09...</code></pre>
<p>Then we count the number of friend connections made.
<code>player_id</code> is the player; <code>friend_player_id</code> is the player who was sent a friend request from <code>player_id</code>.
That means some players will be in the <code>player_id</code> column when they send a friend request, but also in the <code>friend_player_id</code> column when they receive a friend request.
Therefore, we sum over sent and received friend connections in the 14 days prior to the survey.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="process-pvz-data.html#cb22-1"></a><span class="co"># filter out those that didn&#39;t happen within the past two weeks</span></span>
<span id="cb22-2"><a href="process-pvz-data.html#cb22-2"></a>friends &lt;-<span class="st"> </span>friends <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb22-3"><a href="process-pvz-data.html#cb22-3"></a><span class="st">  </span><span class="kw">left_join</span>(<span class="kw">select</span>(survey, player_id, start_date)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb22-4"><a href="process-pvz-data.html#cb22-4"></a><span class="st">  </span><span class="kw">filter</span>(event_date_time <span class="op">&gt;=</span><span class="st"> </span>(start_date <span class="op">-</span><span class="st"> </span><span class="kw">days</span>(<span class="dv">14</span>)))</span>
<span id="cb22-5"><a href="process-pvz-data.html#cb22-5"></a></span>
<span id="cb22-6"><a href="process-pvz-data.html#cb22-6"></a><span class="co"># get friend requests sent</span></span>
<span id="cb22-7"><a href="process-pvz-data.html#cb22-7"></a>a &lt;-<span class="st"> </span>friends <span class="op">%&gt;%</span></span>
<span id="cb22-8"><a href="process-pvz-data.html#cb22-8"></a><span class="st">  </span><span class="kw">group_by</span>(player_id) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb22-9"><a href="process-pvz-data.html#cb22-9"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">requests_sent =</span> <span class="kw">length</span>(<span class="kw">unique</span>(friend_player_id)))</span>
<span id="cb22-10"><a href="process-pvz-data.html#cb22-10"></a></span>
<span id="cb22-11"><a href="process-pvz-data.html#cb22-11"></a><span class="co"># get friend requests received</span></span>
<span id="cb22-12"><a href="process-pvz-data.html#cb22-12"></a>b &lt;-<span class="st"> </span>friends <span class="op">%&gt;%</span></span>
<span id="cb22-13"><a href="process-pvz-data.html#cb22-13"></a><span class="st">  </span><span class="kw">group_by</span>(friend_player_id) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb22-14"><a href="process-pvz-data.html#cb22-14"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">requests_received =</span> <span class="kw">length</span>(<span class="kw">unique</span>(player_id)))</span>
<span id="cb22-15"><a href="process-pvz-data.html#cb22-15"></a></span>
<span id="cb22-16"><a href="process-pvz-data.html#cb22-16"></a><span class="co"># add those new variables to the data</span></span>
<span id="cb22-17"><a href="process-pvz-data.html#cb22-17"></a>friends &lt;-<span class="st"> </span><span class="kw">left_join</span>(a, b, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;player_id&quot;</span> =<span class="st"> &quot;friend_player_id&quot;</span>))</span>
<span id="cb22-18"><a href="process-pvz-data.html#cb22-18"></a></span>
<span id="cb22-19"><a href="process-pvz-data.html#cb22-19"></a><span class="co"># not a lot of people received friend requests (meaning they&#39;re NA), so before adding sent and received up, we set NAs to zero</span></span>
<span id="cb22-20"><a href="process-pvz-data.html#cb22-20"></a>friends &lt;-<span class="st"> </span>friends <span class="op">%&gt;%</span></span>
<span id="cb22-21"><a href="process-pvz-data.html#cb22-21"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb22-22"><a href="process-pvz-data.html#cb22-22"></a>    <span class="kw">across</span>(</span>
<span id="cb22-23"><a href="process-pvz-data.html#cb22-23"></a>      <span class="kw">c</span>(<span class="kw">starts_with</span>(<span class="st">&quot;requests&quot;</span>)),</span>
<span id="cb22-24"><a href="process-pvz-data.html#cb22-24"></a>      <span class="op">~</span><span class="st"> </span><span class="kw">if_else</span>(<span class="kw">is.na</span>(.x), 0L, .x)</span>
<span id="cb22-25"><a href="process-pvz-data.html#cb22-25"></a>    ),</span>
<span id="cb22-26"><a href="process-pvz-data.html#cb22-26"></a>    <span class="dt">friends =</span> requests_sent <span class="op">+</span><span class="st"> </span>requests_received</span>
<span id="cb22-27"><a href="process-pvz-data.html#cb22-27"></a>  ) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb22-28"><a href="process-pvz-data.html#cb22-28"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">starts_with</span>(<span class="st">&quot;requests&quot;</span>))</span>
<span id="cb22-29"><a href="process-pvz-data.html#cb22-29"></a></span>
<span id="cb22-30"><a href="process-pvz-data.html#cb22-30"></a><span class="kw">rm</span>(a, b)</span></code></pre></div>
</div>
<div id="gestures" class="section level3">
<h3><span class="header-section-number">2.2.6</span> Gestures</h3>
<p>The gesture data shows when a player used a gesture (gesture/emote/command) that can be seen by other players.
The variables:</p>
<ul>
<li><code>player_id</code> = Unique identifier for a player.</li>
<li><code>gesture_key</code> = Key name of the geature used.</li>
<li><code>gesture_type</code> = Whether the gesture was a gesture, command or emote.</li>
<li><code>game_session</code> = Unique identifier for a game session.</li>
<li><code>date_time</code> = The date time when the gesture was used.</li>
</ul>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="process-pvz-data.html#cb23-1"></a>gestures &lt;-<span class="st"> </span><span class="kw">read_both_waves</span>(<span class="st">&quot;OII_PVZ_Gesture&quot;</span>)</span>
<span id="cb23-2"><a href="process-pvz-data.html#cb23-2"></a><span class="kw">write_rds</span>(gestures, <span class="kw">here</span>(<span class="st">&quot;data/ea/gestures.rds&quot;</span>))</span>
<span id="cb23-3"><a href="process-pvz-data.html#cb23-3"></a><span class="kw">glimpse</span>(gestures)</span></code></pre></div>
<pre><code>## Rows: 30,962
## Columns: 6
## $ wave         &lt;chr&gt; &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;,...
## $ player_id    &lt;chr&gt; &quot;82B117FECD1A9E83B9076E7FB0C737546AA542CB6D0020870CCE3...
## $ gesture_key  &lt;chr&gt; &quot;emotebuff_cu6emoji10&quot;, &quot;id_unlockitem_linkup&quot;, &quot;emote...
## $ gesture_type &lt;chr&gt; &quot;socialboarditemtype_emote&quot;, &quot;socialboarditemtype_comm...
## $ game_session &lt;chr&gt; &quot;d4587f72bb1aa09b0d1c0b39d0bd3a9d4a372810e5f12756ed3cc...
## $ date_time    &lt;dttm&gt; 2020-09-09 03:37:05, 2020-09-09 03:44:28, 2020-09-09 ...</code></pre>
<p>We first match only those sessions that were within the time frame, then count how many gestures a player used.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="process-pvz-data.html#cb25-1"></a>gestures &lt;-<span class="st"> </span>gestures <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb25-2"><a href="process-pvz-data.html#cb25-2"></a><span class="st">  </span><span class="kw">left_join</span>(<span class="kw">select</span>(survey, player_id, start_date)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb25-3"><a href="process-pvz-data.html#cb25-3"></a><span class="st">  </span><span class="kw">filter</span>(date_time <span class="op">&gt;=</span><span class="st"> </span>(start_date <span class="op">-</span><span class="st"> </span><span class="kw">days</span>(<span class="dv">14</span>))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb25-4"><a href="process-pvz-data.html#cb25-4"></a><span class="st">  </span><span class="kw">count</span>(player_id, <span class="dt">name =</span> <span class="st">&quot;gestures&quot;</span>)</span></code></pre></div>
</div>
<div id="leveling" class="section level3">
<h3><span class="header-section-number">2.2.7</span> Leveling</h3>
<p>This data set shows when a player went up a level with a character.
The variables:</p>
<ul>
<li><code>player_id</code> = Unique identifier for a player.</li>
<li><code>platform</code> = One of the major platforms, eg. PC, Playstation, Xbox.</li>
<li><code>level</code> = The level earned for the character.</li>
<li><code>date_time</code> = The date time when the level was earned.</li>
<li><code>character_class</code> = The character key noting the character used.</li>
</ul>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="process-pvz-data.html#cb26-1"></a>leveling &lt;-<span class="st"> </span><span class="kw">read_both_waves</span>(<span class="st">&quot;OII_PVZ_Leveling&quot;</span>)</span>
<span id="cb26-2"><a href="process-pvz-data.html#cb26-2"></a><span class="kw">write_rds</span>(leveling, <span class="kw">here</span>(<span class="st">&quot;data/ea/leveling.rds&quot;</span>))</span>
<span id="cb26-3"><a href="process-pvz-data.html#cb26-3"></a><span class="kw">glimpse</span>(leveling)</span></code></pre></div>
<pre><code>## Rows: 12,197
## Columns: 6
## $ wave            &lt;chr&gt; &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;...
## $ player_id       &lt;chr&gt; &quot;F2F0ECA80B7BBA4BBF32E536CE670CB06AA542CB6D0020870C...
## $ platform        &lt;chr&gt; &quot;Playstation 4&quot;, &quot;Playstation 4&quot;, &quot;XBox One&quot;, &quot;Play...
## $ level           &lt;dbl&gt; 1, 16, 66, 1, 3, 4, 2, 13, 9, 12, 38, 8, 34, 1, 3, ...
## $ date_time       &lt;dttm&gt; 2020-09-11 15:33:24, 2020-09-11 15:06:55, 2020-09-...
## $ character_class &lt;chr&gt; &quot;mpplant_peashooter&quot;, &quot;mpzombie_wizard&quot;, &quot;mpzombie_...</code></pre>
<p>We only include those sessions that happened within the time frame, then we count how many times a player went up a level.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="process-pvz-data.html#cb28-1"></a>leveling &lt;-<span class="st"> </span>leveling <span class="op">%&gt;%</span></span>
<span id="cb28-2"><a href="process-pvz-data.html#cb28-2"></a><span class="st">  </span><span class="kw">left_join</span>(<span class="kw">select</span>(survey, player_id, start_date)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb28-3"><a href="process-pvz-data.html#cb28-3"></a><span class="st">  </span><span class="kw">filter</span>(date_time <span class="op">&gt;=</span><span class="st"> </span>(start_date <span class="op">-</span><span class="st"> </span><span class="kw">days</span>(<span class="dv">14</span>))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb28-4"><a href="process-pvz-data.html#cb28-4"></a><span class="st">  </span><span class="kw">count</span>(player_id, <span class="dt">name =</span> <span class="st">&quot;levelings&quot;</span>)</span></code></pre></div>
</div>
<div id="prestige" class="section level3">
<h3><span class="header-section-number">2.2.8</span> Prestige</h3>
<p>This data set show when a a player went up a prestige level with a character.
Prestige levels are different from character levels.
The variables:</p>
<ul>
<li><code>player_id</code> = Unique identifier for a player.</li>
<li><code>platform</code> = One of the major platforms, eg. PC, Playstation, Xbox.</li>
<li><code>prestige_level</code> = The prestige level for the character.</li>
<li><code>date_time</code> = The date time the prestige level was earned.</li>
<li><code>character_class</code> = The character key noting the character used.</li>
</ul>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="process-pvz-data.html#cb29-1"></a>prestige &lt;-<span class="st"> </span><span class="kw">read_both_waves</span>(<span class="st">&quot;OII_PVZ_Presti&quot;</span>)</span>
<span id="cb29-2"><a href="process-pvz-data.html#cb29-2"></a><span class="kw">glimpse</span>(prestige)</span></code></pre></div>
<pre><code>## Rows: 309
## Columns: 6
## $ wave            &lt;chr&gt; &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;...
## $ player_id       &lt;chr&gt; &quot;E8EEB3797D51527FF55D5793C8A09CE56AA542CB6D0020870C...
## $ platform        &lt;chr&gt; &quot;XBox One&quot;, &quot;Playstation 4&quot;, &quot;Playstation 4&quot;, &quot;XBox...
## $ prestige_level  &lt;chr&gt; &quot;prst04&quot;, &quot;prst03&quot;, &quot;prst07&quot;, &quot;prst07&quot;, &quot;prst02&quot;, &quot;...
## $ date_time       &lt;dttm&gt; 2020-07-28 15:47:51, 2020-08-01 23:05:52, 2020-07-...
## $ character_class &lt;chr&gt; &quot;pac&quot;, &quot;acorn&quot;, &quot;ps&quot;, &quot;ci&quot;, &quot;sc&quot;, &quot;ch&quot;, &quot;ps&quot;, &quot;imp&quot;...</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="process-pvz-data.html#cb31-1"></a><span class="kw">write_rds</span>(prestige, <span class="kw">here</span>(<span class="st">&quot;data/ea/prestige.rds&quot;</span>))</span></code></pre></div>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="process-pvz-data.html#cb32-1"></a>prestige &lt;-<span class="st"> </span>prestige <span class="op">%&gt;%</span></span>
<span id="cb32-2"><a href="process-pvz-data.html#cb32-2"></a><span class="st">  </span><span class="kw">left_join</span>(<span class="kw">select</span>(survey, player_id, start_date)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb32-3"><a href="process-pvz-data.html#cb32-3"></a><span class="st">  </span><span class="kw">filter</span>(date_time <span class="op">&gt;=</span><span class="st"> </span>(start_date <span class="op">-</span><span class="st"> </span><span class="kw">days</span>(<span class="dv">14</span>))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb32-4"><a href="process-pvz-data.html#cb32-4"></a><span class="st">  </span><span class="kw">count</span>(player_id, <span class="dt">name =</span> <span class="st">&quot;prestige&quot;</span>)</span></code></pre></div>
</div>
<div id="registrations" class="section level3">
<h3><span class="header-section-number">2.2.9</span> Registrations</h3>
<p>Registrations only happen once per player and show when a player registered with PvZ for the first time.
Won’t be needed later, but code is here for completeness.
The variables:</p>
<ul>
<li><code>player_id</code> = Unique identifier for a player.</li>
<li><code>platform</code> = One of the major platforms, eg. PC, Playstation, Xbox.</li>
<li><code>date</code> = Date of the registration.</li>
<li><code>country</code> = Country the login came from.</li>
</ul>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="process-pvz-data.html#cb33-1"></a>registrations &lt;-<span class="st"> </span><span class="kw">read_both_waves</span>(<span class="st">&quot;OII_PVZ_Registration&quot;</span>)</span></code></pre></div>
</div>
<div id="experience-points" class="section level3">
<h3><span class="header-section-number">2.2.10</span> Experience Points</h3>
<p>This data set shows how many XP a player earned at what time and in what session.
The variables:</p>
<ul>
<li><code>player_id</code> = Unique identifier for a player.</li>
<li><code>platform</code> = One of the major platforms, eg. PC, Playstation, Xbox.</li>
<li><code>date_time</code> = The date time when the xp was earned.</li>
<li><code>character_class</code> = The character key noting the character used.</li>
<li><code>game_session</code> = Unique identifier for a game session.</li>
<li><code>xp_earned</code> = The xp amount earned.</li>
</ul>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="process-pvz-data.html#cb34-1"></a><span class="co"># Gotta process dates because they are different across the two files</span></span>
<span id="cb34-2"><a href="process-pvz-data.html#cb34-2"></a>xp &lt;-<span class="st"> </span><span class="kw">read_both_waves</span>(</span>
<span id="cb34-3"><a href="process-pvz-data.html#cb34-3"></a>  <span class="st">&quot;OII_PVZ_XPEarned&quot;</span>, </span>
<span id="cb34-4"><a href="process-pvz-data.html#cb34-4"></a>  <span class="dt">col_types =</span> <span class="kw">cols</span>(<span class="dt">date_time =</span> <span class="st">&quot;c&quot;</span>)</span>
<span id="cb34-5"><a href="process-pvz-data.html#cb34-5"></a>)</span>
<span id="cb34-6"><a href="process-pvz-data.html#cb34-6"></a></span>
<span id="cb34-7"><a href="process-pvz-data.html#cb34-7"></a><span class="co"># All other timestamps, above, are automatically parsed to UTC so we do that here as well</span></span>
<span id="cb34-8"><a href="process-pvz-data.html#cb34-8"></a>xp &lt;-<span class="st"> </span>xp <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb34-9"><a href="process-pvz-data.html#cb34-9"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">date_time =</span> <span class="kw">anytime</span>(date_time, <span class="st">&quot;UTC&quot;</span>))</span>
<span id="cb34-10"><a href="process-pvz-data.html#cb34-10"></a><span class="kw">glimpse</span>(xp)</span></code></pre></div>
<pre><code>## Rows: 50,688
## Columns: 8
## $ wave            &lt;chr&gt; &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;...
## $ player_id       &lt;chr&gt; &quot;C3A8CCBD40369D42ACA14A0AFE4A1B8B6AA542CB6D0020870C...
## $ platform        &lt;chr&gt; &quot;Playstation 4&quot;, &quot;Playstation 4&quot;, &quot;Playstation 4&quot;, ...
## $ date_time       &lt;dttm&gt; 2020-09-10 00:00:00, 2020-09-10 00:00:00, 2020-09-...
## $ character_class &lt;chr&gt; &quot;mpzombie_scientist&quot;, &quot;mpplant_acorn&quot;, &quot;mpzombie_en...
## $ server_session  &lt;chr&gt; &quot;7f427e1bf867824121dbc671cf097ef790f32d022529abc341...
## $ xp_earned       &lt;dbl&gt; 909, 3453, 988, 1080, 2552, 3310, 3310, 3310, 1140,...
## $ game_session    &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="process-pvz-data.html#cb36-1"></a><span class="kw">write_rds</span>(xp, <span class="kw">here</span>(<span class="st">&quot;data/ea/xp.rds&quot;</span>))</span></code></pre></div>
<p>We sum up how many experience points a player got in total during the two weeks before the survey.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="process-pvz-data.html#cb37-1"></a>xp &lt;-<span class="st"> </span>xp <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb37-2"><a href="process-pvz-data.html#cb37-2"></a><span class="st">  </span><span class="kw">left_join</span>(<span class="kw">select</span>(survey, player_id, start_date)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb37-3"><a href="process-pvz-data.html#cb37-3"></a><span class="st">  </span><span class="kw">filter</span>(date_time <span class="op">&gt;=</span><span class="st"> </span>(start_date <span class="op">-</span><span class="st"> </span><span class="kw">days</span>(<span class="dv">14</span>))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb37-4"><a href="process-pvz-data.html#cb37-4"></a><span class="st">  </span><span class="kw">group_by</span>(player_id) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb37-5"><a href="process-pvz-data.html#cb37-5"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">xp =</span> <span class="kw">sum</span>(xp_earned)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb37-6"><a href="process-pvz-data.html#cb37-6"></a><span class="st">  </span><span class="kw">ungroup</span>()</span></code></pre></div>
</div>
<div id="process-game-time" class="section level3">
<h3><span class="header-section-number">2.2.11</span> Process game time</h3>
<p>The raw game times were used in processing the other files, so we left processing it until here.</p>
<p>First, we check which game sessions happened within the 14 days a participant took a survey (the file is already filtered to only include participants who actually filled out the survey).</p>
<p>Afterwards, we aggregate the remaining game sessions per participant to get to how many hours they played in the two weeks before the survey (i.e., only aggregate/summarize <code>game_session</code>s that happened within the past 14 days).</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="process-pvz-data.html#cb38-1"></a>game_time &lt;-<span class="st"> </span>game_time <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb38-2"><a href="process-pvz-data.html#cb38-2"></a><span class="st">  </span><span class="kw">left_join</span>(<span class="kw">select</span>(survey, player_id, start_date)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb38-3"><a href="process-pvz-data.html#cb38-3"></a><span class="st">  </span><span class="kw">filter</span>(game_start_time <span class="op">&gt;=</span><span class="st"> </span>(start_date <span class="op">-</span><span class="st"> </span><span class="kw">days</span>(<span class="dv">14</span>))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb38-4"><a href="process-pvz-data.html#cb38-4"></a><span class="st">  </span><span class="kw">select</span>(player_id, game_start_time, game_end_time) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb38-5"><a href="process-pvz-data.html#cb38-5"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">duration =</span> game_end_time<span class="op">-</span>game_start_time) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb38-6"><a href="process-pvz-data.html#cb38-6"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Hours =</span> <span class="kw">as.numeric</span>(duration)<span class="op">/</span><span class="dv">60</span><span class="op">/</span><span class="dv">60</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb38-7"><a href="process-pvz-data.html#cb38-7"></a><span class="st">  </span><span class="kw">group_by</span>(player_id) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb38-8"><a href="process-pvz-data.html#cb38-8"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Hours =</span> <span class="kw">sum</span>(Hours)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb38-9"><a href="process-pvz-data.html#cb38-9"></a><span class="st">  </span><span class="kw">ungroup</span>()</span></code></pre></div>
</div>
</div>
<div id="merge-survey-and-telemetry" class="section level2">
<h2><span class="header-section-number">2.3</span> Merge survey and telemetry</h2>
<p>Next, we add the person-level aggregated telemetry variables to the survey data.
The resulting data set will not deal with session level data, but summarizes, for each participant, their engagement in the 2 week observation period.</p>
<p>First put all the aggregated telemetry into one data frame.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="process-pvz-data.html#cb39-1"></a>telemetry &lt;-<span class="st"> </span><span class="kw">reduce</span>(</span>
<span id="cb39-2"><a href="process-pvz-data.html#cb39-2"></a>  <span class="kw">list</span>(authentications, characters, friends, game_time, gestures, leveling, prestige, xp),</span>
<span id="cb39-3"><a href="process-pvz-data.html#cb39-3"></a>  left_join</span>
<span id="cb39-4"><a href="process-pvz-data.html#cb39-4"></a>)</span></code></pre></div>
<p>And then merge them to the survey.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="process-pvz-data.html#cb40-1"></a>pvz &lt;-<span class="st"> </span>survey <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb40-2"><a href="process-pvz-data.html#cb40-2"></a><span class="st">  </span><span class="kw">left_join</span>(telemetry, <span class="dt">by =</span> <span class="st">&quot;player_id&quot;</span>)</span></code></pre></div>
</div>
<div id="exclusions" class="section level2">
<h2><span class="header-section-number">2.4</span> Exclusions</h2>
<p>First save a file with no exclusions.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="process-pvz-data.html#cb41-1"></a><span class="kw">write_rds</span>(pvz, <span class="kw">here</span>(<span class="st">&quot;data/ea/pvz.rds&quot;</span>))</span></code></pre></div>
<div id="straightliners" class="section level3">
<h3><span class="header-section-number">2.4.1</span> Straightliners</h3>
<p>We take out all players who straightlined (gave the same response to every item) through SPANE and motivations scales. (If only SPANE items existed, then we didn’t exclude.)</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="process-pvz-data.html#cb42-1"></a>pvz &lt;-<span class="st"> </span>pvz <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb42-2"><a href="process-pvz-data.html#cb42-2"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb42-3"><a href="process-pvz-data.html#cb42-3"></a>    <span class="dt">straightliner =</span> </span>
<span id="cb42-4"><a href="process-pvz-data.html#cb42-4"></a>      straightliner_spane <span class="op">&amp;</span><span class="st"> </span>straightliner_motivations</span>
<span id="cb42-5"><a href="process-pvz-data.html#cb42-5"></a>  ) </span>
<span id="cb42-6"><a href="process-pvz-data.html#cb42-6"></a>pvz <span class="op">%&gt;%</span><span class="st">   </span></span>
<span id="cb42-7"><a href="process-pvz-data.html#cb42-7"></a><span class="st">  </span><span class="kw">select</span>(<span class="kw">contains</span>(<span class="st">&quot;straight&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb42-8"><a href="process-pvz-data.html#cb42-8"></a><span class="st">  </span><span class="kw">group_by_all</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb42-9"><a href="process-pvz-data.html#cb42-9"></a><span class="st">  </span>count</span></code></pre></div>
<pre><code>## # A tibble: 4 x 4
## # Groups:   straightliner_spane, straightliner_motivations, straightliner [4]
##   straightliner_spane straightliner_motivations straightliner     n
##   &lt;lgl&gt;               &lt;lgl&gt;                     &lt;lgl&gt;         &lt;int&gt;
## 1 FALSE               FALSE                     FALSE           507
## 2 FALSE               TRUE                      FALSE             4
## 3 TRUE                FALSE                     FALSE             6
## 4 TRUE                TRUE                      TRUE              1</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="process-pvz-data.html#cb44-1"></a>pvz <span class="op">%&gt;%</span><span class="st">   </span></span>
<span id="cb44-2"><a href="process-pvz-data.html#cb44-2"></a><span class="st">  </span><span class="kw">tabyl</span>(straightliner) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb44-3"><a href="process-pvz-data.html#cb44-3"></a><span class="st">  </span><span class="kw">adorn_pct_formatting</span>()</span></code></pre></div>
<pre><code>##  straightliner   n percent
##          FALSE 517   99.8%
##           TRUE   1    0.2%</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="process-pvz-data.html#cb46-1"></a><span class="co"># filter() would also exclude NAs!</span></span>
<span id="cb46-2"><a href="process-pvz-data.html#cb46-2"></a>pvz &lt;-<span class="st"> </span><span class="kw">filter</span>(pvz, <span class="op">!</span>straightliner <span class="op">|</span><span class="st"> </span><span class="kw">is.na</span>(straightliner))</span></code></pre></div>
</div>
<div id="outliers" class="section level3">
<h3><span class="header-section-number">2.4.2</span> Outliers</h3>
<p>Potential outliers. We replace all values that are more than 6SD away from the variable’s mean with NAs. As a consequence, individuals are excluded on an analysis-by-analysis case (so if has bad data relevant to that analysis or figure).</p>
<p>This is only done for a subset of variables (relavant to analyses; see below).</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="process-pvz-data.html#cb47-1"></a>pvz &lt;-<span class="st"> </span>pvz <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb47-2"><a href="process-pvz-data.html#cb47-2"></a><span class="st">  </span><span class="co"># These variables will be affected</span></span>
<span id="cb47-3"><a href="process-pvz-data.html#cb47-3"></a><span class="st">  </span><span class="kw">pivot_longer</span>(</span>
<span id="cb47-4"><a href="process-pvz-data.html#cb47-4"></a>    <span class="kw">c</span>(spane_<span class="dv">1</span><span class="op">:</span>xp, <span class="op">-</span>played_with_others, <span class="op">-</span><span class="kw">contains</span>(<span class="st">&quot;straightliner&quot;</span>))</span>
<span id="cb47-5"><a href="process-pvz-data.html#cb47-5"></a>  ) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb47-6"><a href="process-pvz-data.html#cb47-6"></a><span class="st">  </span><span class="kw">group_by</span>(name) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb47-7"><a href="process-pvz-data.html#cb47-7"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">z_value =</span> <span class="kw">as.numeric</span>(<span class="kw">scale</span>(value))) </span></code></pre></div>
<p>These are the numbers of people taken out of each variable (only variables that were affected are shown):</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="process-pvz-data.html#cb48-1"></a><span class="co"># This is what are taken out</span></span>
<span id="cb48-2"><a href="process-pvz-data.html#cb48-2"></a>pvz <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb48-3"><a href="process-pvz-data.html#cb48-3"></a><span class="st">  </span><span class="kw">summarise</span>(</span>
<span id="cb48-4"><a href="process-pvz-data.html#cb48-4"></a>    <span class="dt">Extremes =</span> <span class="kw">sum</span>(<span class="kw">abs</span>(z_value<span class="op">&gt;=</span><span class="dv">6</span>), <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb48-5"><a href="process-pvz-data.html#cb48-5"></a>    <span class="dt">Extremes_p =</span> <span class="kw">percent</span>(Extremes<span class="op">/</span><span class="kw">n</span>(), <span class="dt">accuracy =</span> <span class="fl">.01</span>)</span>
<span id="cb48-6"><a href="process-pvz-data.html#cb48-6"></a>  ) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb48-7"><a href="process-pvz-data.html#cb48-7"></a><span class="st">  </span><span class="kw">filter</span>(Extremes <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>)</span></code></pre></div>
<pre><code>## # A tibble: 12 x 3
##    name               Extremes Extremes_p
##    &lt;chr&gt;                 &lt;int&gt; &lt;chr&gt;     
##  1 critical_hit_count        1 0.19%     
##  2 damage_dealt              1 0.19%     
##  3 friends                   2 0.39%     
##  4 gestures                  2 0.39%     
##  5 Hours                     1 0.19%     
##  6 levelings                 2 0.39%     
##  7 score                     2 0.39%     
##  8 shots_fired               2 0.39%     
##  9 shots_hit                 1 0.19%     
## 10 total_death_count         1 0.19%     
## 11 total_kill_count          1 0.19%     
## 12 xp                        2 0.39%</code></pre>
<p>Code to do it:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="process-pvz-data.html#cb50-1"></a>pvz &lt;-<span class="st"> </span>pvz <span class="op">%&gt;%</span></span>
<span id="cb50-2"><a href="process-pvz-data.html#cb50-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">value =</span> <span class="kw">ifelse</span>(<span class="kw">abs</span>(z_value <span class="op">&gt;=</span><span class="st"> </span><span class="dv">6</span>), <span class="ot">NA</span>, value)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb50-3"><a href="process-pvz-data.html#cb50-3"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>z_value) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb50-4"><a href="process-pvz-data.html#cb50-4"></a><span class="st">  </span><span class="kw">pivot_wider</span>(<span class="dt">names_from =</span> <span class="st">&quot;name&quot;</span>, <span class="dt">values_from =</span> <span class="st">&quot;value&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb50-5"><a href="process-pvz-data.html#cb50-5"></a><span class="st">  </span><span class="kw">ungroup</span>()</span></code></pre></div>
</div>
</div>
<div id="save-files" class="section level2">
<h2><span class="header-section-number">2.5</span> Save files</h2>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="process-pvz-data.html#cb51-1"></a><span class="kw">write_rds</span>(pvz, <span class="kw">here</span>(<span class="st">&quot;data/ea/pvz-excluded.rds&quot;</span>))</span></code></pre></div>
</div>
<div id="session-info" class="section level2">
<h2><span class="header-section-number">2.6</span> Session info</h2>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="process-pvz-data.html#cb52-1"></a><span class="kw">sessionInfo</span>()</span></code></pre></div>
<pre><code>## R version 4.0.2 (2020-06-22)
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## Running under: Windows 10 x64 (build 18363)
## 
## Matrix products: default
## 
## locale:
## [1] LC_COLLATE=English_United States.1252 
## [2] LC_CTYPE=English_United States.1252   
## [3] LC_MONETARY=English_United States.1252
## [4] LC_NUMERIC=C                          
## [5] LC_TIME=English_United States.1252    
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
<<<<<<< HEAD
##  [1] forcats_0.5.0     stringr_1.4.0     dplyr_1.0.2       purrr_0.3.4      
##  [5] readr_1.4.0       tidyr_1.1.2       tibble_3.0.4      ggplot2_3.3.2    
##  [9] tidyverse_1.3.0   anytime_0.3.9     janitor_2.0.1     scales_1.1.1     
## [13] lubridate_1.7.9.2 here_1.0.1        knitr_1.30        readxl_1.3.1     
## [17] pacman_0.5.1     
## 
## loaded via a namespace (and not attached):
##  [1] tidyselect_1.1.0 xfun_0.19        haven_2.3.1      snakecase_0.11.0
##  [5] colorspace_2.0-0 vctrs_0.3.5      generics_0.1.0   htmltools_0.5.0 
##  [9] yaml_2.2.1       utf8_1.1.4       rlang_0.4.9      pillar_1.4.7    
## [13] withr_2.3.0      glue_1.4.2       DBI_1.1.0        dbplyr_2.0.0    
## [17] modelr_0.1.8     lifecycle_0.2.0  munsell_0.5.0    gtable_0.3.0    
## [21] cellranger_1.1.0 rvest_0.3.6      evaluate_0.14    labeling_0.4.2  
## [25] parallel_4.0.3   fansi_0.4.1      broom_0.7.2      Rcpp_1.0.5      
## [29] backports_1.2.1  jsonlite_1.7.2   farver_2.0.3     fs_1.5.0        
## [33] hms_0.5.3        digest_0.6.27    stringi_1.5.3    bookdown_0.21   
## [37] rprojroot_2.0.2  grid_4.0.3       cli_2.2.0        tools_4.0.3     
## [41] magrittr_2.0.1   crayon_1.3.4     pkgconfig_2.0.3  ellipsis_0.3.1  
## [45] xml2_1.3.2       reprex_0.3.0     rstudioapi_0.13  assertthat_0.2.1
## [49] rmarkdown_2.6    httr_1.4.2       R6_2.5.0         compiler_4.0.3</code></pre>
=======
##  [1] forcats_0.5.0   stringr_1.4.0   dplyr_1.0.0     purrr_0.3.4    
##  [5] readr_1.3.1     tidyr_1.1.0     tibble_3.0.3    ggplot2_3.3.2  
##  [9] tidyverse_1.3.0 anytime_0.3.9   janitor_2.0.1   scales_1.1.1   
## [13] lubridate_1.7.9 here_0.1        knitr_1.29      readxl_1.3.1   
## [17] pacman_0.5.1   
## 
## loaded via a namespace (and not attached):
##  [1] tidyselect_1.1.0 xfun_0.15        haven_2.3.1      snakecase_0.11.0
##  [5] colorspace_1.4-1 vctrs_0.3.2      generics_0.0.2   htmltools_0.5.0 
##  [9] yaml_2.2.1       utf8_1.1.4       blob_1.2.1       rlang_0.4.7     
## [13] pillar_1.4.6     withr_2.2.0      glue_1.4.1       DBI_1.1.0       
## [17] dbplyr_1.4.4     modelr_0.1.8     lifecycle_0.2.0  munsell_0.5.0   
## [21] gtable_0.3.0     cellranger_1.1.0 rvest_0.3.5      evaluate_0.14   
## [25] labeling_0.3     fansi_0.4.1      broom_0.7.0.9001 Rcpp_1.0.5      
## [29] backports_1.1.8  jsonlite_1.7.0   farver_2.0.3     fs_1.4.2        
## [33] hms_0.5.3        digest_0.6.25    stringi_1.4.6    bookdown_0.20   
## [37] rprojroot_1.3-2  grid_4.0.2       cli_2.0.2        tools_4.0.2     
## [41] magrittr_1.5     crayon_1.3.4     pkgconfig_2.0.3  ellipsis_0.3.1  
## [45] xml2_1.3.2       reprex_0.3.0     rstudioapi_0.11  assertthat_0.2.1
## [49] rmarkdown_2.5    httr_1.4.1       R6_2.4.1         compiler_4.0.2</code></pre>
>>>>>>> f449c935d496bcb159c5533847257a56a9918a85

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="process-acnh-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/digital-wellbeing/oii-gaming/edit/master/02-preprocess-study-1.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/digital-wellbeing/oii-gaming/blob/master/02-preprocess-study-1.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
